<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SQL语句汇总 | 专业治头秃的博客</title><meta name="keywords" content="MySQL,SQL"><meta name="author" content="专业治头秃"><meta name="copyright" content="专业治头秃"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="数据库与表的操作以及创建约束（一）前言此文旨在汇总从建立数据库到联接查询等绝大部分SQL语句。SQL语句虽不能说很多，但稍有时间不写就容易出错。 SQL是 Structured Query Language 即“结构化查询语言”的简称，它是用来管理关系型数据库的。 其包括：  数据控制语言（DCL）(Data Control Language) 是用来设置或更改数据库用户或角色权限的语句，包括（g">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL语句汇总">
<meta property="og:url" content="http://hekun97@github.io/2020/10/14/sql-yu-ju-hui-zong/index.html">
<meta property="og:site_name" content="专业治头秃的博客">
<meta property="og:description" content="数据库与表的操作以及创建约束（一）前言此文旨在汇总从建立数据库到联接查询等绝大部分SQL语句。SQL语句虽不能说很多，但稍有时间不写就容易出错。 SQL是 Structured Query Language 即“结构化查询语言”的简称，它是用来管理关系型数据库的。 其包括：  数据控制语言（DCL）(Data Control Language) 是用来设置或更改数据库用户或角色权限的语句，包括（g">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.pixabay.com/photo/2017/06/12/04/21/database-2394312_960_720.jpg">
<meta property="article:published_time" content="2020-10-14T02:47:49.000Z">
<meta property="article:modified_time" content="2021-12-20T13:34:56.946Z">
<meta property="article:author" content="专业治头秃">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="SQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.pixabay.com/photo/2017/06/12/04/21/database-2394312_960_720.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://hekun97@github.io/2020/10/14/sql-yu-ju-hui-zong/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":500,"languages":{"author":"作者: 专业治头秃","link":"链接: ","source":"来源: 专业治头秃的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-12-20 21:34:56'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="专业治头秃的博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Java基础</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/2020/12/01/java-ji-chu-bi-ji/"><i class="fa-fw fas fa-male"></i><span> 面向对象编程</span></a></li><li><a class="site-page" href="/2021/06/30/java-ji-chu-2.jdbc-bi-ji/"><i class="fa-fw fas fa-adjust"></i><span> JDBC相关知识</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> JavaWEB</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/2021/06/24/javaweb-1.tomcat-ji-chu-zhi-shi/"><i class="fa-fw fas fa-certificate"></i><span> Tomcat基础知识</span></a></li><li><a class="site-page" href="/2021/06/24/javaweb-2.jiang-tomcat-ji-cheng-dao-idea-zhong/"><i class="fa-fw fas fa-code"></i><span> 将Tomcat集成到IDEA中</span></a></li><li><a class="site-page" href="/2021/06/24/javaweb-3.servlet-kuai-su-ru-men/"><i class="fa-fw fas fa-rocket"></i><span> Servlet快速入门</span></a></li><li><a class="site-page" href="/2021/06/24/javaweb-4.servlet-http-request-bi-ji/"><i class="fa-fw fas fa-fire"></i><span> Servlet&amp;HTTP&amp;Request</span></a></li><li><a class="site-page" href="/2021/06/28/javaweb-5.servlet-http-request-lian-xi-deng-lu-an-li/"><i class="fa-fw fas fa-users"></i><span> 练习案例 - 用户登录</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.pixabay.com/photo/2017/06/12/04/21/database-2394312_960_720.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">专业治头秃的博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Java基础</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/2020/12/01/java-ji-chu-bi-ji/"><i class="fa-fw fas fa-male"></i><span> 面向对象编程</span></a></li><li><a class="site-page" href="/2021/06/30/java-ji-chu-2.jdbc-bi-ji/"><i class="fa-fw fas fa-adjust"></i><span> JDBC相关知识</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> JavaWEB</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/2021/06/24/javaweb-1.tomcat-ji-chu-zhi-shi/"><i class="fa-fw fas fa-certificate"></i><span> Tomcat基础知识</span></a></li><li><a class="site-page" href="/2021/06/24/javaweb-2.jiang-tomcat-ji-cheng-dao-idea-zhong/"><i class="fa-fw fas fa-code"></i><span> 将Tomcat集成到IDEA中</span></a></li><li><a class="site-page" href="/2021/06/24/javaweb-3.servlet-kuai-su-ru-men/"><i class="fa-fw fas fa-rocket"></i><span> Servlet快速入门</span></a></li><li><a class="site-page" href="/2021/06/24/javaweb-4.servlet-http-request-bi-ji/"><i class="fa-fw fas fa-fire"></i><span> Servlet&amp;HTTP&amp;Request</span></a></li><li><a class="site-page" href="/2021/06/28/javaweb-5.servlet-http-request-lian-xi-deng-lu-an-li/"><i class="fa-fw fas fa-users"></i><span> 练习案例 - 用户登录</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SQL语句汇总</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-10-14T02:47:49.000Z" title="发表于 2020-10-14 10:47:49">2020-10-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-12-20T13:34:56.946Z" title="更新于 2021-12-20 21:34:56">2021-12-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/SQL/">SQL</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>23分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="数据库与表的操作以及创建约束（一）"><a href="#数据库与表的操作以及创建约束（一）" class="headerlink" title="数据库与表的操作以及创建约束（一）"></a>数据库与表的操作以及创建约束（一）</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>此文旨在汇总从建立数据库到联接查询等绝大部分<code>SQL</code>语句。<code>SQL</code>语句虽不能说很多，但稍有时间不写就容易出错。</p>
<p><code>SQL</code>是 <code>Structured Query Language</code> 即“结构化查询语言”的简称，它是用来管理关系型数据库的。</p>
<p>其包括：</p>
<ol>
<li><p>数据控制语言（<code>DCL</code>）(<code>Data Control Language</code>)</p>
<p>是用来设置或更改数据库用户或角色权限的语句，包括（<code>grant</code>,<code>deny</code>,<code>revoke</code>等）语句。在默认状态下，只有<code>sysadmin</code>,<code>dbcreator</code>,<code>db_owner</code>或<code>db_securityadmin</code>等人员才有权力执行<code>DCL</code></p>
</li>
<li><p>数据定义语言（<code>DDL</code>）(<code>Data Definition Language</code>)</p>
<p><code>DDL</code>允许用户定义数据，也就是创建表、删除表、修改表结构这些操作。通常，<code>DDL</code>由数据库管理员执行。</p>
</li>
<li><p>数据查询语言（<code>DQL</code>）(<code>Data Query Language</code>)</p>
<p><code>DQL</code>允许用户查询数据，这也是通常最频繁的数据库日常操作</p>
</li>
<li><p>数据操作语言（<code>DML</code>）(<code>Data Manipulation Language</code>)</p>
<p><code>DML</code>为用户提供添加、删除、更新数据的能力，这些是应用程序对数据库的日常操作。</p>
</li>
</ol>
<h2 id="对数据库的操作"><a href="#对数据库的操作" class="headerlink" title="对数据库的操作"></a>对数据库的操作</h2><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE 数据库名;</span><br></pre></td></tr></table></figure>

<p>数据库名命名规则：</p>
<ul>
<li><p>第一个字符必须为下列之一：<font color="green">字母、下划线、#及@符号。</font></p>
</li>
<li><p>后续字符由<font color="green">字母、十进制数、下划线、#、$及@符号</font>组成。</p>
</li>
<li><p>不能为<font color="green">RDBMS（关系型数据库管理系统）</font>的保留关键字。</p>
</li>
<li><p>不允许<font color="green">空格及其他字符</font>。</p>
</li>
</ul>
<p>本文以<code>SQLyog</code>软件为例，创建数据库如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE test_sql</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8585d1504f4bcb04ce88cd.jpg" alt></p>
<p>此图为<code>SQLyog</code>的左侧目录栏，前三个为本地自带数据库。将<code>SQL</code>语句全部选中运行（<code>F8</code>）后，<code>F5</code>刷新目录栏，出现了我们创建的数据库。</p>
<h3 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h3><p>查看当前有几个数据库可供连接。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SHOW DATABASES;</span><br></pre></td></tr></table></figure>

<h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">USE test_sql;</span><br></pre></td></tr></table></figure>

<h3 id="查看当前连接数据库"><a href="#查看当前连接数据库" class="headerlink" title="查看当前连接数据库"></a>查看当前连接数据库</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT DATABASE();</span><br></pre></td></tr></table></figure>

<h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DROP DATABASE test_sql;</span><br></pre></td></tr></table></figure>

<h2 id="MySQL数据类型"><a href="#MySQL数据类型" class="headerlink" title="MySQL数据类型"></a>MySQL数据类型</h2><p>接下来就开始创建表了，在创建表之前先列出几种常用的数据类型</p>
<h3 id="整数数据类型"><a href="#整数数据类型" class="headerlink" title="整数数据类型"></a>整数数据类型</h3><ul>
<li><p><code>INT</code> 大小：4字节</p>
</li>
<li><p><code>BIGINT</code>大小：8字节</p>
</li>
</ul>
<h3 id="浮点数据类型"><a href="#浮点数据类型" class="headerlink" title="浮点数据类型"></a>浮点数据类型</h3><ul>
<li><code>FLOAT</code>或<code>REAL</code>大小：4字节，精度：7位小数</li>
<li><code>DOUBLE</code>大小：8字节，精度：15位小数</li>
</ul>
<h3 id="高进度小数"><a href="#高进度小数" class="headerlink" title="高进度小数"></a>高进度小数</h3><ul>
<li>DECIMAL(M,N)：由用户指定精度的小数，例如，DECIMAL(20,10)表示一共20位，其中小数10位，通常用于财务计算。</li>
</ul>
<h3 id="字符串数据类型"><a href="#字符串数据类型" class="headerlink" title="字符串数据类型"></a>字符串数据类型</h3><ul>
<li><code>CHAR(N)</code>：定长字符串，存储指定长度的字符串，例如，<code>CHAR(100)</code>总是存储100个字符的字符串。</li>
<li><code>VARCHAR (N)</code>范围：0-65535， 变长字符串，存储可变长度的字符串，例如，<code>VARCHAR(100)</code>可以存储0~100个字符的字符串</li>
</ul>
<h3 id="布尔类型"><a href="#布尔类型" class="headerlink" title="布尔类型"></a>布尔类型</h3><ul>
<li><code>BOOLEAN</code>：布尔类型，存储<code>True</code>或者<code>False</code>。</li>
</ul>
<h3 id="日期数据类型"><a href="#日期数据类型" class="headerlink" title="日期数据类型"></a>日期数据类型</h3><ul>
<li><code>DATE</code>：日期类型， 格式：<code>YYYY</code>，存储日期，例如，<code>2018-06-22</code></li>
<li><code>TIME</code>：时间类型，存储时间，例如，<code>12:20:59</code></li>
<li><code>DATETIME</code>：日期和时间类型，格式：<code>YYYY-MM-DD HH-</code>，存储日期+时间，例如，<code>2018-06-22 12:20:59</code></li>
</ul>
<h2 id="对表的操作"><a href="#对表的操作" class="headerlink" title="对表的操作"></a>对表的操作</h2><p>数据库中对表的操作有：</p>
<ul>
<li>创建表；</li>
<li>查看表的数量；</li>
<li>查看表的结构;</li>
<li>删除表；</li>
<li>复制表；<ul>
<li>复制表的结构及内容</li>
<li>只复制表的结构</li>
</ul>
</li>
<li>修改表；<ul>
<li>添加列</li>
<li>更改列</li>
<li>删除列</li>
</ul>
</li>
</ul>
<h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE &lt; 表名 &gt; (&lt; 列名 &gt; &lt; 列的数据类型 &gt; [&lt;列的约束&gt;]);</span><br></pre></td></tr></table></figure>

<p>如：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE t_student(</span><br><span class="line">  student_name VARCHAR(10),</span><br><span class="line">  student_birthday DATETIME,</span><br><span class="line">  student_phone INT,</span><br><span class="line">  student_score FLOAT</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>上表中我们创建了一张学生表，并定义了姓名、生日、电话、得分四列，列名后加上数据类型。其中要注意的是<code>VARCHAR</code>需要在括号内设置字符串的最大长度。</p>
<p>刷新之后就可以看到我们创建的数据库中多了一张表：</p>
<p><img src="https://pic.downk.cc/item/5e858623504f4bcb04ceca12.jpg" alt></p>
<p>选择打开表可以直观的看到内容：</p>
<p><img src="https://pic.downk.cc/item/5e858643504f4bcb04cee0cf.jpg" alt></p>
<p>之后我们可以通过SQL语句也可以通过手动为表添加内容。</p>
<h3 id="查看表的数量"><a href="#查看表的数量" class="headerlink" title="查看表的数量"></a>查看表的数量</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SHOW TABLES;</span><br></pre></td></tr></table></figure>

<h3 id="查看表的结构"><a href="#查看表的结构" class="headerlink" title="查看表的结构"></a>查看表的结构</h3><p>如果你想要知道一个表的结构，可以使用<code>DESCRIBE</code>命令；它显示表中每个列的信息：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DESCRIBE t_student;</span><br></pre></td></tr></table></figure>

<h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DROP TABLE t_student;</span><br></pre></td></tr></table></figure>

<h3 id="复制表"><a href="#复制表" class="headerlink" title="复制表"></a>复制表</h3><h4 id="同时复制表的结构和内容"><a href="#同时复制表的结构和内容" class="headerlink" title="同时复制表的结构和内容"></a>同时复制表的结构和内容</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE copy_student</span><br><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student;</span><br></pre></td></tr></table></figure>

<p>如此我们便复制了一张名为<code>copy_student</code>的表，它包括<code>t_student</code>表中的内容与结构。<br><font color="red">注意：复制表的同时表的约束并不能复制过来。</font></p>
<h3 id="只复制表结构而不复制表内容"><a href="#只复制表结构而不复制表内容" class="headerlink" title="只复制表结构而不复制表内容"></a>只复制表结构而不复制表内容</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE copy_student</span><br><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  1 &#x3D; 0;</span><br></pre></td></tr></table></figure>

<p>只需在<code>WHERE</code>条件中加入一个永不为真的值即可。</p>
<h3 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h3><h4 id="添加新列"><a href="#添加新列" class="headerlink" title="添加新列"></a>添加新列</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE t_student</span><br><span class="line">ADD</span><br><span class="line">  student_address VARCHAR(50);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858643504f4bcb04cee0cf.jpg" alt></p>
<h4 id="更改列"><a href="#更改列" class="headerlink" title="更改列"></a>更改列</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE t_student</span><br><span class="line">CHANGE</span><br><span class="line">  student_birthday student_age INT;</span><br></pre></td></tr></table></figure>

<p>这里我们把学生生日列改为学生年龄列，<code>CHANGE</code>后第一个为旧列名，第二个为新列名。</p>
<p><img src="https://pic.downk.cc/item/5e85867c504f4bcb04cf0e43.jpg" alt></p>
<h4 id="删除列"><a href="#删除列" class="headerlink" title="删除列"></a>删除列</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE t_student</span><br><span class="line">DROP COLUMN</span><br><span class="line">  student_score;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8586ed504f4bcb04cf65cf.jpg" alt> </p>
<h2 id="数据库完整性"><a href="#数据库完整性" class="headerlink" title="数据库完整性"></a>数据库完整性</h2><p>保证数据库的完整性是为了防止垃圾数据的产生，以免影响数据库的执行效率。这里简要说一些，因为毕竟不是理论类的文章，这里主要是整理汇总<code>SQL</code>语句。</p>
<p><strong>分类：</strong></p>
<ol>
<li><p>实体完整性（主键约束，唯一约束）<br>保证一行数据是有效的</p>
</li>
<li><p>域完整性（非空约束，默认约束）<br>保证一列数据是有效的</p>
</li>
<li><p>引用完整性（外键约束）<br>保证引用的编号是有效的</p>
</li>
<li><p>用户自定义完整性<br>保证自定义规则</p>
</li>
</ol>
<h3 id="实体完整性–主键约束"><a href="#实体完整性–主键约束" class="headerlink" title="实体完整性–主键约束"></a>实体完整性–主键约束</h3><p><code>PRIMARY KEY</code></p>
<p>主键列不能为空也不能重复，通常加在表的id列中。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE t_student(</span><br><span class="line">  student_id INT PRIMARY KEY,</span><br><span class="line">  student_name VARCHAR(10),</span><br><span class="line">  student_birthday DATETIME,</span><br><span class="line">  student_phone INT,</span><br><span class="line">  student_score FLOAT</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="实体完整性–唯一约束"><a href="#实体完整性–唯一约束" class="headerlink" title="实体完整性–唯一约束"></a>实体完整性–唯一约束</h3><p><code>UNIQUE</code></p>
<p>唯一约束是指给定列的值必须唯一，与主键约束不同的是它可以为空。通常加在表中不能重复的信息中，如电话号码。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE t_student(</span><br><span class="line">  student_id INT PRIMARY KEY,</span><br><span class="line">  student_name VARCHAR(10),</span><br><span class="line">  student_birthday DATETIME,</span><br><span class="line">  student_phone INT UNIQUE,</span><br><span class="line">  student_score FLOAT</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="域完整性–非空约束"><a href="#域完整性–非空约束" class="headerlink" title="域完整性–非空约束"></a>域完整性–非空约束</h3><p><code>NOT NULL</code></p>
<p>非空约束可以加在诸如姓名等列上。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE t_student(</span><br><span class="line">  student_id INT PRIMARY KEY,</span><br><span class="line">  student_name VARCHAR(10) NOT NULL,</span><br><span class="line">  student_birthday DATETIME,</span><br><span class="line">  student_phone INT UNIQUE,</span><br><span class="line">  student_score FLOAT</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="域完整性–默认约束"><a href="#域完整性–默认约束" class="headerlink" title="域完整性–默认约束"></a>域完整性–默认约束</h3><p>设定默认值后，可以在添加此列时不指定值,数据库会自动填充设定的默认值。</p>
<p><code>DEFAULT</code></p>
<p>现给学生表加入性别列，默认值设为“男”，这样添加新的学生信息时如果没有填写具体的性别均会默认为男性：  </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE t_student(</span><br><span class="line">  student_id INT PRIMARY KEY,</span><br><span class="line">  student_name VARCHAR(10) NOT NULL,</span><br><span class="line">  student_sex VARCHAR(5) DEFAULT &#39;男&#39;,</span><br><span class="line">  student_birthday DATETIME,</span><br><span class="line">  student_phone INT UNIQUE,</span><br><span class="line">  student_score FLOAT</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858713504f4bcb04cf85ed.jpg" alt></p>
<h3 id="引用完整性–外键约束"><a href="#引用完整性–外键约束" class="headerlink" title="引用完整性–外键约束"></a>引用完整性–外键约束</h3><p>外键约束是指在外键关联主键上强制加上一个约束，如果违反该约束，则不允许该条数据的修改。</p>
<h4 id="创建表时，同时创建约束"><a href="#创建表时，同时创建约束" class="headerlink" title="创建表时，同时创建约束"></a>创建表时，同时创建约束</h4><p>创建主表–班级表：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE t_class(</span><br><span class="line">  class_id INT PRIMARY KEY,</span><br><span class="line">  class_name VARCHAR(20) UNIQUE NOT NULL</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>创建从表–学生表，并设置外键约束：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE t_student(</span><br><span class="line">  student_id INT PRIMARY KEY,</span><br><span class="line">  s_c_id INT,</span><br><span class="line">  student_name VARCHAR(10) NOT NULL,</span><br><span class="line">  student_sex VARCHAR(5) DEFAULT &#39;男&#39;,</span><br><span class="line">  student_birthday DATETIME,</span><br><span class="line">  student_phone INT UNIQUE,</span><br><span class="line">  student_score FLOAT,</span><br><span class="line">  CONSTRAINT fk_class_id FOREIGN KEY(s_c_id) REFERENCES t_class(class_id);</span><br></pre></td></tr></table></figure>

<p>上面的第8行代码就是创建外键约束的方法，个人认为也是<code>SQL</code>语句中最难记的。</p>
<h4 id="已创建表后，追加外键约束"><a href="#已创建表后，追加外键约束" class="headerlink" title="已创建表后，追加外键约束"></a>已创建表后，追加外键约束</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER table t_student</span><br><span class="line">ADD</span><br><span class="line">  CONSTRAINT fk_class_id FOREIGN KEY(s_c_id) REFERENCES t_class(class_id);</span><br></pre></td></tr></table></figure>

<h4 id="删除外键约束"><a href="#删除外键约束" class="headerlink" title="删除外键约束"></a>删除外键约束</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE person drop FOREIGN KEY fk_class_id;</span><br></pre></td></tr></table></figure>

<h1 id="数据修改、数据查询（二）"><a href="#数据修改、数据查询（二）" class="headerlink" title="数据修改、数据查询（二）"></a>数据修改、数据查询（二）</h1><h2 id="创建表-1"><a href="#创建表-1" class="headerlink" title="创建表"></a>创建表</h2><p>首先创建一张表如下，创建表的方法介绍过了，这里就不再赘述。</p>
<p><img src="https://pic.downk.cc/item/5e858868504f4bcb04d08c36.jpg" alt></p>
<h2 id="数据修改"><a href="#数据修改" class="headerlink" title="数据修改"></a>数据修改</h2><ul>
<li>添加新数据</li>
<li>更改数据</li>
<li>删除数据（行）</li>
</ul>
<h3 id="添加新数据："><a href="#添加新数据：" class="headerlink" title="添加新数据："></a>添加新数据：</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">INSERT INTO &lt; 表名 &gt; </span><br><span class="line">  (&lt; 列名列表 &gt;)</span><br><span class="line">VALUES</span><br><span class="line">  (&lt; 值列表 &gt;)</span><br></pre></td></tr></table></figure>

<p><strong>如：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">INSERT INTO t_student (</span><br><span class="line">    student_id,</span><br><span class="line">    student_name,</span><br><span class="line">    student_age,</span><br><span class="line">    student_sex</span><br><span class="line">  )</span><br><span class="line">VALUES</span><br><span class="line">  (1, &#39;大毛&#39;, 18, &#39;男&#39;);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e85889d504f4bcb04d0b802.jpg" alt><br>其中列名可以省略，省略之后要求插入的值必须与列一一对应：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">INSERT INTO t_student</span><br><span class="line">VALUES</span><br><span class="line">  (2, &#39;王二&#39;, 20, &#39;男&#39;);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8588f6504f4bcb04d10c43.jpg" alt></p>
<p><strong>多行数据添加：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">INSERT INTO t_student</span><br><span class="line">VALUES</span><br><span class="line">  (3, &#39;张三&#39;, 22, &#39;男&#39;),</span><br><span class="line">  (4, &#39;李四&#39;, 17, &#39;女&#39;),</span><br><span class="line">  (5, &#39;王五&#39;, 23, &#39;男&#39;);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8588f6504f4bcb04d10c43.jpg" alt></p>
<h3 id="更改数据："><a href="#更改数据：" class="headerlink" title="更改数据："></a>更改数据：</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">UPDATE 表名</span><br><span class="line">SET</span><br><span class="line">  列1 &#x3D; 新值1,</span><br><span class="line">  列2 &#x3D; 新值2</span><br><span class="line">WHERE</span><br><span class="line">  过滤条件</span><br></pre></td></tr></table></figure>

<p>假如要修改李四的年龄为21岁</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">UPDATE t_student</span><br><span class="line">SET</span><br><span class="line">  student_age &#x3D; 21</span><br><span class="line">WHERE</span><br><span class="line">  student_name &#x3D; &#39;李四&#39;;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858953504f4bcb04d15f04.jpg" alt></p>
<p><font color="red">注：修改多个列的值时用逗号隔开。要想设置某一列的值为空，只需让<code>&lt;列名&gt;=NULL</code> 即可。<code>WHERE</code>表示过滤条件。</font></p>
<h3 id="删除数据（行）"><a href="#删除数据（行）" class="headerlink" title="删除数据（行）"></a>删除数据（行）</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DELETE FROM 表名</span><br><span class="line">WHERE</span><br><span class="line">  过滤条件</span><br></pre></td></tr></table></figure>

<p>现要删除20到22岁的学生信息：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DELETE FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  student_age BETWEEN 20</span><br><span class="line">  AND 22;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8589b5504f4bcb04d1aa51.jpg" alt></p>
<p><code>WHERE</code>的判断条件之后会更详细的介绍。</p>
<p>删除除了<code>DELETE</code>还有一种方法<code>TRUNCATE</code>，写法：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">TRUNCATE TABLE 表名</span><br></pre></td></tr></table></figure>

<p><strong>二者区别在于：</strong><br><code>DELETE</code>会记录日志，意味着删除后的数据还可以恢复，但是效率低。<code>TRUNCATE</code>不会记录日志，删除后的数据不能恢复，但是效率高。需要注意的是，<code>TRUNCATE</code>不能用于有外键约束引用的表。</p>
<h2 id="查询操作"><a href="#查询操作" class="headerlink" title="查询操作"></a>查询操作</h2><p>分类：</p>
<ul>
<li><p>投影操作<br>指定查询结果中能显示哪些列</p>
</li>
<li><p>选择操作<br>指定哪些行出现在结果中</p>
</li>
<li><p>排序操作<br>指定查询的结果以什么样的顺序显示</p>
</li>
</ul>
<h3 id="投影操作"><a href="#投影操作" class="headerlink" title="投影操作"></a>投影操作</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  列1,</span><br><span class="line">  列2</span><br><span class="line">FROM 表名</span><br></pre></td></tr></table></figure>

<p>多个列中间用逗号隔开，如果选择所有列可以用<code>*</code>号简写。</p>
<p>还是此表：</p>
<p><img src="https://pic.downk.cc/item/5e858953504f4bcb04d15f04.jpg" alt></p>
<p>现在只想要查看姓名和年龄列：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  student_name,</span><br><span class="line">  student_age</span><br><span class="line">FROM t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858b21504f4bcb04d2a9a9.jpg" alt></p>
<p>注意这里不是把其他列删除了，而是只显示我们想看见的部分。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  CONCAT(student_name, &#39;——&#39;, student_age) &#39;组合值&#39;</span><br><span class="line">FROM t_student;</span><br></pre></td></tr></table></figure>

<p><code>CONCAT</code>，可以将列与列之间用想要的符号连接起来：  </p>
<p><img src="https://pic.downk.cc/item/5e858b6d504f4bcb04d2e262.jpg" alt></p>
<h4 id="排除重复——DISTINCT"><a href="#排除重复——DISTINCT" class="headerlink" title="排除重复——DISTINCT"></a>排除重复——DISTINCT</h4><p>现给原表加入一班级列：</p>
<p><img src="https://pic.downk.cc/item/5e858baa504f4bcb04d30d15.jpg" alt></p>
<p>按照之前方法查询班级列得到：</p>
<p><img src="https://pic.downk.cc/item/5e858bba504f4bcb04d31704.jpg" alt></p>
<p>但是我们只想查看具体有哪些班级，这里就需要用到去重，也就是<code>DISTINCT</code>。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  DISTINCT student_class</span><br><span class="line">FROM t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858bd7504f4bcb04d32e9b.jpg" alt></p>
<h4 id="返回限定行数的查询——LIMIT"><a href="#返回限定行数的查询——LIMIT" class="headerlink" title="返回限定行数的查询——LIMIT"></a>返回限定行数的查询——<code>LIMIT</code></h4><p><code>LIMIT</code>后面参数为1或2个：</p>
<p><code>LIMIT N</code>表示从第一行开始返回<code>N</code>行结果，<code>LIMIT i,N</code>表示从第<code>i+1</code>行开始返回<code>N</code>行结果。</p>
<p>例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">LIMIT</span><br><span class="line">  3;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858c13504f4bcb04d35ddb.jpg" alt></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">LIMIT</span><br><span class="line">  2, 3;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858c21504f4bcb04d36847.jpg" alt></p>
<p><font color="red">注：<code>LIMIT</code>很重要，它是之后做数据表格分页的关键。</font></p>
<h3 id="条件查询：选择操作——WHERE"><a href="#条件查询：选择操作——WHERE" class="headerlink" title="条件查询：选择操作——WHERE"></a>条件查询：选择操作——WHERE</h3><ul>
<li>单条件选择</li>
<li>多条件选择</li>
</ul>
<p><strong>单条件选择标准结构：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  列1,</span><br><span class="line">  列2</span><br><span class="line">FROM 表名</span><br><span class="line">WHERE</span><br><span class="line">  列3 &#x3D; 值</span><br></pre></td></tr></table></figure>

<p>关系运算符包括：<code>&gt;  &gt;=  &lt;  &lt;=  =  !=</code></p>
<p><strong>多条件选择标准结构：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  列A,</span><br><span class="line">  列B</span><br><span class="line">FROM 表</span><br><span class="line">WHERE</span><br><span class="line">  条件1 (</span><br><span class="line">    AND 或者 OR 或者 NOT</span><br><span class="line">  ) 条件2</span><br></pre></td></tr></table></figure>

<p>其中<code>AND</code>表示并且，<code>OR</code>表示或者，<code>NOT</code>表示排序符合此条件的记录。</p>
<p>如果不加括号，条件运算按照<code>NOT</code>、<code>AND</code>、<code>OR</code>的优先级进行，即<code>NOT</code>优先级最高，其次是<code>AND</code>，最后是<code>OR</code>。加上括号可以改变优先级。</p>
<h4 id="选择范围——BETWEEN"><a href="#选择范围——BETWEEN" class="headerlink" title="选择范围——BETWEEN"></a>选择范围——BETWEEN</h4><p>如：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  student_age BETWEEN 20</span><br><span class="line">  AND 23;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858c9c504f4bcb04d3bc84.jpg" alt></p>
<p><code>BETWEEN</code>后的值为从下限到上限。</p>
<h4 id="定义集合——IN或NOT-IN"><a href="#定义集合——IN或NOT-IN" class="headerlink" title="定义集合——IN或NOT IN"></a>定义集合——IN或NOT IN</h4><p>现在想查看年龄为17、20、23的学生信息： </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  student_age IN (17, 20, 23);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858cca504f4bcb04d3d9f6.jpg" alt><br>反之<code>NOT IN</code>就是选择不包括在集合里的学生信息。</p>
<h4 id="模糊查询——LIKE"><a href="#模糊查询——LIKE" class="headerlink" title="模糊查询——LIKE"></a>模糊查询——LIKE</h4><p>为了更好的解释模糊查询，这里重新建张表：</p>
<p><img src="https://pic.downk.cc/item/5e858ce6504f4bcb04d3ea6c.jpg" alt></p>
<p>这里姓王的兄弟们躺枪…别介意。</p>
<p><strong>首先先说下占位符与通配符：</strong></p>
<p>占位符 <code>_</code>，表示任何单个字符。</p>
<p>通配符 <code>%</code>，表示包含零或多个字符。</p>
<p>下面就来用模糊查询逐一选中我们想要的行。</p>
<p><strong>名字只有两个字的：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  student_name LIKE &#39;__&#39;;</span><br></pre></td></tr></table></figure>

<p>这里可能看不清，引号里实际是两个占位符。</p>
<p><img src="https://pic.downk.cc/item/5e858d07504f4bcb04d400b9.jpg" alt></p>
<p><strong>所有姓王的：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  student_name LIKE &#39;王%&#39;;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858d22504f4bcb04d411df.jpg" alt></p>
<p><strong>最后一个字是“王”的：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  student_name LIKE &#39;%王&#39;;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858d59504f4bcb04d43c32.jpg" alt><br><strong>只要是名字中有“王”字的：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  student_name LIKE &#39;%王%&#39;;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858d69504f4bcb04d448d9.jpg" alt><br>这下模糊查询就很明白了吧，当然还有其他组合，大家可以自己尝试。</p>
<h4 id="处理空值数据"><a href="#处理空值数据" class="headerlink" title="处理空值数据"></a>处理空值数据</h4><p>判断条件不能用<code>列名=NULL</code>，而是要用<code>IS NULL</code>或<code>IS NOT NULL</code>。</p>
<p><strong>标准写法：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  性别 IS NULL</span><br></pre></td></tr></table></figure>

<h3 id="排序操作——ORDER-BY："><a href="#排序操作——ORDER-BY：" class="headerlink" title="排序操作——ORDER BY："></a>排序操作——ORDER BY：</h3><p>使用<code>ORDER BY</code>时，列名上指定<code>ASC</code>或<code>DESC</code>。<code>ASC</code>表示正序，<code>DESC</code>表示倒序。如果不指定则默认为正序。</p>
<p><strong>按年龄排：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">ORDER BY</span><br><span class="line">  student_age ASC;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858dc8504f4bcb04d4a68a.jpg" alt></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">ORDER BY</span><br><span class="line">  student_age DESC;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858dc8504f4bcb04d4a68a.jpg" alt></p>
<h2 id="最后一定要注意！"><a href="#最后一定要注意！" class="headerlink" title="最后一定要注意！"></a>最后一定要注意！</h2><p><strong>基本查询SQL的执行顺序：</strong></p>
<ol>
<li>执行<code>FROM</code></li>
<li><code>WHERE</code>条件过滤 </li>
<li><code>SELECT</code>投影 </li>
<li><code>ORDER BY</code>排序</li>
</ol>
<h1 id="聚合函数、分组、子查询及组合查询（三）"><a href="#聚合函数、分组、子查询及组合查询（三）" class="headerlink" title="聚合函数、分组、子查询及组合查询（三）"></a>聚合函数、分组、子查询及组合查询（三）</h1><h2 id="聚合函数："><a href="#聚合函数：" class="headerlink" title="聚合函数："></a>聚合函数：</h2><p><code>SQL</code>中提供的聚合函数可以用来统计、求和、求最值等等。</p>
<p>分类：</p>
<ul>
<li><p><code>COUNT</code>：统计行数量</p>
</li>
<li><p><code>SUM</code>：获取单个列的合计值</p>
</li>
<li><p><code>AVG</code>：计算某个列的平均值</p>
</li>
<li><p><code>MAX</code>：计算列的最大值</p>
</li>
<li><p><code>MIN</code>：计算列的最小值</p>
</li>
</ul>
<p>首先，创建数据表如下：</p>
<p><img src="https://pic.downk.cc/item/5e858f04504f4bcb04d5769e.jpg" alt></p>
<h3 id="执行列、行计数（count）"><a href="#执行列、行计数（count）" class="headerlink" title="执行列、行计数（count）"></a>执行列、行计数（count）</h3><p>标准格式</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  COUNT(&lt; 计数规范 &gt;)</span><br><span class="line">FROM &lt; 表名 &gt;</span><br></pre></td></tr></table></figure>

<p>其中，计数规范包括：</p>
<ul>
<li><p><code>*</code>:计数所有选择的行，包括NULL值；</p>
</li>
<li><p><code>ALL</code>列名：计数指定列的所有非空值行，如果不写，默认为<code>ALL</code>；</p>
</li>
<li><p><code>DISTINCT</code> 列名：计数指定列的唯一非空值行。</p>
</li>
</ul>
<p><strong>例，计算班里共有多少学生：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  COUNT(*)</span><br><span class="line">FROM t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858f75504f4bcb04d5bfd2.jpg" alt></p>
<p><strong>也可加入筛选条件，如求女学生数目：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  COUNT(*)</span><br><span class="line">FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  student_sex &#x3D; &#39;女&#39;;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858fba504f4bcb04d5f5c2.jpg" alt></p>
<p><strong>如果要计算班级数目，就需要用到<code>DISTINCT</code>：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  COUNT(DISTINCT student_class)</span><br><span class="line">FROM t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858ffe504f4bcb04d637e9.jpg" alt></p>
<p><code>DISTINCT</code>即去重，如果不加<code>DISTINCT</code>则结果为表行数——5。</p>
<h3 id="返回列合计值（SUM）"><a href="#返回列合计值（SUM）" class="headerlink" title="返回列合计值（SUM）"></a>返回列合计值（SUM）</h3><p><font color="red">注：<code>sum</code>只有<code>ALL</code>与<code>DISTINCT</code>两种计数规范，无<code>*</code>。</font></p>
<p><strong>计算学生年龄之和：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  SUM(student_age)</span><br><span class="line">FROM t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8591b6504f4bcb04d765aa.jpg" alt></p>
<h3 id="返回列平均值（AVG）"><a href="#返回列平均值（AVG）" class="headerlink" title="返回列平均值（AVG）"></a>返回列平均值（AVG）</h3><p><strong>计算学生平均年龄：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  AVG(student_age)</span><br><span class="line">FROM t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8591db504f4bcb04d782a2.jpg" alt></p>
<h3 id="返回最大值-最小值（MAX-MIN）"><a href="#返回最大值-最小值（MAX-MIN）" class="headerlink" title="返回最大值/最小值（MAX/MIN）"></a>返回最大值/最小值（MAX/MIN）</h3><p><strong>求年龄最大的学生信息（最小值同理）</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  MAX(student_age)</span><br><span class="line">FROM t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8591f9504f4bcb04d797a4.jpg" alt></p>
<p><font color="red">注：这里只能求出最大年龄，要想显示年龄最大的学生全部信息，需要用到之后的子查询。</font></p>
<h2 id="数据分组（GROUP-BY"><a href="#数据分组（GROUP-BY" class="headerlink" title="数据分组（GROUP BY)"></a>数据分组（GROUP BY)</h2><p><code>SQL</code>中数据可以按列名分组，搭配聚合函数十分实用。</p>
<p>例，统计每个班的人数:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  student_class,</span><br><span class="line">  COUNT(ALL student_name) AS 总人数</span><br><span class="line">FROM t_student</span><br><span class="line">GROUP BY</span><br><span class="line">  (student_class);</span><br></pre></td></tr></table></figure>

<p><code>AS</code>为定义别名，别名的使用在组合及联接查询时会有很好的效果，之后再说。</p>
<p><img src="https://pic.downk.cc/item/5e85922e504f4bcb04d7bdd7.jpg" alt></p>
<p>分组中也可以加入筛选条件<code>WHERE</code>，不过这里一定要注意的是，执行顺序为：</p>
<ol>
<li><code>WHERE</code>过滤</li>
<li>分组</li>
<li>聚合函数。</li>
</ol>
<p><font color="red">牢记！</font></p>
<p><strong>统计每个班上20岁以上的学生人数：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  student_class,</span><br><span class="line">  COUNT(student_name) AS 总人数</span><br><span class="line">FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  student_age &gt; 20</span><br><span class="line">GROUP BY</span><br><span class="line">  (student_class);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e859258504f4bcb04d7de5a.jpg" alt></p>
<h3 id="HAVING过滤条件"><a href="#HAVING过滤条件" class="headerlink" title="HAVING过滤条件"></a>HAVING过滤条件</h3><p>之前说了分组操作、聚合函数、<code>WHERE</code>过滤的执行顺序，那如果我们希望在聚合之后执行过滤条件怎么办？</p>
<p>例，我们想查询平均年龄在20岁以上的班级</p>
<p>能用下面的语句吗？</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  student_class,</span><br><span class="line">  AVG(student_age)</span><br><span class="line">FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  AVG(student_age) &gt; 20</span><br><span class="line">GROUP BY</span><br><span class="line">  student_class;</span><br></pre></td></tr></table></figure>

<p>结果会出错。正因为聚合函数在<code>WHERE</code>之后执行，所以这里在<code>WHERE</code>判断条件里加入聚合函数是做不到的。</p>
<p>这里使用<code>HAIVING</code>即可完成：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  student_class,</span><br><span class="line">  AVG(student_age) AS 平均年龄</span><br><span class="line">FROM t_student</span><br><span class="line">GROUP BY</span><br><span class="line">  (student_class)</span><br><span class="line">HAVING</span><br><span class="line">  AVG(student_age) &gt; 20;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e859290504f4bcb04d808b0.jpg" alt></p>
<p>这里再啰嗦一句</p>
<p><strong><code>SQL</code>的执行顺序：</strong></p>
<ul>
<li><p>第一步：执行<code>FROM</code></p>
</li>
<li><p>第二步：<code>WHERE</code>条件过滤</p>
</li>
<li><p>第三步：<code>GROUP BY</code>分组</p>
</li>
<li><p>第四步：执行<code>SELECT</code>投影列</p>
</li>
<li><p>第五步：<code>HAVING</code>条件过滤</p>
</li>
<li><p>第六步：执行<code>ORDER BY</code> 排序</p>
</li>
</ul>
<h2 id="子查询："><a href="#子查询：" class="headerlink" title="子查询："></a>子查询：</h2><p>为什么要子查询？</p>
<p>现有一数据表如下：</p>
<p><img src="https://pic.downk.cc/item/5e8592b7504f4bcb04d825d3.jpg" alt><br>根据之前的知识我们可以查出每门科目的最高分，但是要想查出取得最高分的学生信息就做不到了。这时就需要用到子查询来取得完整的信息。</p>
<p>什么是子查询？子查询就是嵌套在主查询中的查询。</p>
<p>子查询可以嵌套在主查询中所有位置，包括<code>SELECT</code>、<code>FROM</code>、<code>WHERE</code>、<code>GROUP BY</code>、<code>HAVING</code>、<code>ORDER BY</code>。</p>
<p>但并不是每个位置嵌套子查询都是有意义并实用的，这里对几种有实际意义的子查询进行说明。</p>
<p>现有表两张：一张学生表、一张班表。<code>id</code>相关联</p>
<p><img src="https://pic.downk.cc/item/5e8592df504f4bcb04d84202.jpg" alt></p>
<p><img src="https://pic.downk.cc/item/5e8592eb504f4bcb04d84c01.jpg" alt></p>
<h3 id="在SELECT中嵌套"><a href="#在SELECT中嵌套" class="headerlink" title="在SELECT中嵌套"></a>在SELECT中嵌套</h3><p>学生信息和班级名称位于不同的表中，要在同一张表中查出学生的学号、姓名、班级名称：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  s.student_id,</span><br><span class="line">  s.student_name,(</span><br><span class="line">    SELECT</span><br><span class="line">      class_name</span><br><span class="line">    FROM t_class c</span><br><span class="line">    WHERE</span><br><span class="line">      c.class_id &#x3D; s.class_id</span><br><span class="line">  )</span><br><span class="line">FROM t_student s</span><br><span class="line">GROUP BY</span><br><span class="line">  s.student_id;</span><br></pre></td></tr></table></figure>


<p>首先这条<code>SQL</code>语句用到了别名，写法为在<code>FORM</code>的表名后加上某个字符比如<code>FROM t_student s，</code>这样在之后调用<code>t_student</code>的某一列时就可以用<code>s.student_id来</code>强调此列来源于对应别名的那张表。</p>
<p>别名在子查询及联接查询中的应用有着很好效果，当两张表有相同列名或者为了加强可读性，给表加上不同的别名，就能很好的区分哪些列属于哪张表。</p>
<p>还有种情况就是在子查询或联接查询时，主查询及子查询均为对同一张表进行操作，为主、子查询中的表加上不同的别名能够很好的区分哪些列的操作是在主查询中进行的，哪些列的操作是在子查询中进行的，下文会有实例说明。</p>
<p>接下来回到上面的<code>SQL</code>语句中，可以看出本条子查询的嵌套是在<code>SELECT</code>位置（括号括起来的部分），它与学号、学生姓名以逗号分隔开并列在<code>SELECT</code>位置，也就是说它是我们想要查出的一列，</p>
<p>子查询中查出的是，班级表中的班级<code>id</code>与学生表中的班级<code>id</code>相同的行，注意 <code>WHERE c.class_id=s.class_id</code>这里就是别名用法的一个很好的体现，区分开了两张表中同样列名的列。</p>
<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e859338504f4bcb04d88208.jpg" alt><br>最后的<code>GROUP BY</code>可以理解为对重复行的去重，如果不加：</p>
<p><img src="https://pic.downk.cc/item/5e859345504f4bcb04d88abb.jpg" alt></p>
<h3 id="在WHERE中嵌套"><a href="#在WHERE中嵌套" class="headerlink" title="在WHERE中嵌套"></a>在WHERE中嵌套</h3><p>现要查出C语言成绩最高的学生的信息：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  student_subject &#x3D; &#39;C语言&#39;</span><br><span class="line">  AND student_score &gt;&#x3D; ALL (</span><br><span class="line">    SELECT</span><br><span class="line">      student_score</span><br><span class="line">    FROM t_student</span><br><span class="line">    WHERE</span><br><span class="line">      student_subject &#x3D; &#39;C语言&#39;</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e85936a504f4bcb04d8a527.jpg" alt><br>这里出现了一个<code>ALL</code>，其为子查询运算符</p>
<p>分类：</p>
<ul>
<li><p><code>ALL</code>运算符<br>和子查询的结果逐一比较，必须全部满足时表达式的值才为真。</p>
</li>
<li><p><code>ANY</code>运算符<br>和子查询的结果逐一比较，其中一条记录满足条件则表达式的值就为真。</p>
</li>
<li><p><code>EXISTS/NOT EXISTS</code>运算符<br><code>EXISTS</code>判断子查询是否存在数据，如果存在则表达式为真，反之为假。<code>NOT EXISTS</code>相反。</p>
</li>
</ul>
<p>在子查询或相关查询中，要求出某个列的最大值，通常都是用<code>ALL</code>来比较，大意为比其他行都要大的值即为最大值。</p>
<p>要查出C语言成绩比李四高的学生的信息：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">WHERE</span><br><span class="line">  student_subject &#x3D; &#39;C语言&#39;</span><br><span class="line">  AND student_score &gt;(</span><br><span class="line">    SELECT</span><br><span class="line">      student_score</span><br><span class="line">    FROM t_student</span><br><span class="line">    WHERE</span><br><span class="line">      student_name &#x3D; &#39;李四&#39;</span><br><span class="line">      AND student_subject &#x3D; &#39;C语言&#39;</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8593dd504f4bcb04d8f4ac.jpg" alt></p>
<p>通过上面两例，应该可以明白子查询在<code>WHERE</code>中嵌套的作用。通过子查询中返回的列值来作为比较对象，在<code>WHERE</code>中运用不同的比较运算符来对其进行比较，从而得到结果。</p>
<p>现在我们回到最开始的问题，怎么查出每门课最高成绩的学生的信息：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student s1</span><br><span class="line">WHERE</span><br><span class="line">  s1.student_score &gt;&#x3D; ALL(</span><br><span class="line">    SELECT</span><br><span class="line">      s2.student_score</span><br><span class="line">    FROM t_student s2</span><br><span class="line">    WHERE</span><br><span class="line">      s1.student_subject &#x3D; s2.student_subject</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<p>这里就是上文提到的别名的第二种用法，主、子查询对同一张表操作，区分开位于内外表中相同的列名。</p>
<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e8593f4504f4bcb04d90360.jpg" alt></p>
<h3 id="子查询的分类"><a href="#子查询的分类" class="headerlink" title="子查询的分类"></a>子查询的分类</h3><ul>
<li><p>相关子查询</p>
<ul>
<li>执行依赖于外部查询的数据。</li>
<li>外部查询返回一行，子查询就执行一次。</li>
</ul>
</li>
<li><p>非相关子查询</p>
<ul>
<li>独立于外部查询的子查询。</li>
<li>子查询总共执行一次，执行完毕后后将值传递给外部查询。</li>
</ul>
</li>
</ul>
<p>上文提到的例子中，第一个例子求学生对应班级名的即为相关子查询，其中<code>WHERE c.class_id=s.class_id</code>即为相关条件。其他的例子均只对一张表进行操作，为非相关子查询。</p>
<p>需要注意的是相关子查询主查询执行一回，子查询就执行一回，十分耗费时间，尤其是当数据多的时候。</p>
<h2 id="组合查询"><a href="#组合查询" class="headerlink" title="组合查询"></a>组合查询</h2><p>通过<code>UNION</code>运算符来将两张表纵向联接，基本方式为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  列1,</span><br><span class="line">  列2</span><br><span class="line">FROM 表1</span><br><span class="line">UNION</span><br><span class="line">SELECT</span><br><span class="line">  列3,</span><br><span class="line">  列4</span><br><span class="line">FROM 表2;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>UNION ALL</code>为保留重复行：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  列1,</span><br><span class="line">  列2</span><br><span class="line">FROM 表1</span><br><span class="line">UNION ALL</span><br><span class="line">SELECT</span><br><span class="line">  列3,</span><br><span class="line">  列4</span><br><span class="line">FROM 表2;</span><br></pre></td></tr></table></figure>

<p>组合查询并不是太实用，所以这里只是简单提一下，不举出例子了。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>上文说过相关子查询不推荐使用，组合查询又用的少之又少，那需要关联的多张表我们怎么做？</p>
<p>这就是下一篇博文要详细说明的<code>SQL</code>的重点表联接、联接查询。而此篇博文目的是为了对嵌套查询、别名的用法等等打下基础，毕竟只是写法变了，思路还是相似的。</p>
<h1 id="表联接与联接查询（四）"><a href="#表联接与联接查询（四）" class="headerlink" title="表联接与联接查询（四）"></a>表联接与联接查询（四）</h1><h2 id="前言-1"><a href="#前言-1" class="headerlink" title="前言"></a>前言</h2><p>既然是最后一篇那就不能只列出些干枯的标准语句，更何况表联接也是<code>SQL</code>中较难的部分，所以此次搭配题目来详细阐述表联接。</p>
<h2 id="表联接"><a href="#表联接" class="headerlink" title="表联接"></a>表联接</h2><p>前面说到相关子查询效率低下，那我们怎么能将不同表的信息一起查询出来呢？这就需要用到表联接。</p>
<p>和之前的<code>UNION</code>组合查询不同，<code>UNION</code>是将不同的表组合起来，也就是纵向联接，说白了就是竖着拼起来。</p>
<p>而表联接是通过笛卡尔乘积将表进行横向联接，所谓的通过笛卡尔乘积简单说就是两表的行依次相联再相加。要想更详细的理解可以百度下，毕竟本文主要是汇总<code>SQL</code>语句。</p>
<p>现在有如下两张表：</p>
<p><img src="https://pic.downk.cc/item/5e859487504f4bcb04d967d5.jpg" alt><br><img src="https://pic.downk.cc/item/5e859494504f4bcb04d97383.jpg" alt></p>
<p>这是当初老师布置的一份作业，我偷个懒就不改数据了。不过把这些真神级人物的大名贴出来做“实验”总觉得心里有很虚，更何况大部分都是IT业的。如有什么不敬我先道个歉，别跟我一般见识。</p>
<p>好了，扯远了。怎么联接这两张表呢？标准写法：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student</span><br><span class="line">JOIN t_class;</span><br></pre></td></tr></table></figure>

<p>结果这里只截一小部分图，因为笛卡尔乘积后的行数等于两张表的行数乘积，实在太多了。</p>
<p><img src="https://pic.downk.cc/item/5e8594ae504f4bcb04d984a7.jpg" alt></p>
<p>这里就可以理解表联接的原理了，依次相连再相加。当然其中很多是无效行，为了去除无效的行我们就要用到外键来进行约束。学生表中的<code>_fk</code>与班级表中的<code>_infor</code>相关联：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student s</span><br><span class="line">JOIN t_class c ON s._fk &#x3D; c._infor;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e8594c2504f4bcb04d9917b.jpg" alt></p>
<p>这里通过外键的匹配我们就得到了一张完美的联接之后的表，它可以看做一张新表，想要任何数据均可以从此表中查询，这就是表联接的强大之处。</p>
<h2 id="表联接的分类："><a href="#表联接的分类：" class="headerlink" title="表联接的分类："></a>表联接的分类：</h2><h3 id="内联接"><a href="#内联接" class="headerlink" title="内联接"></a>内联接</h3><p>内联接是指两个表中某一行相关的列值匹配时，这一行才会出现在表中。就像上例中<code>s._fk</code>与<code>c._infor</code>相同时才会出行该行，其他的行剔除。</p>
<p>语法为<code>INNER JOIN</code> 其中<code>INNER</code>可以省略。</p>
<p>内联接的简写：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student s,</span><br><span class="line">  t_class c</span><br><span class="line">WHERE</span><br><span class="line">  c._infor &#x3D; s._fk</span><br></pre></td></tr></table></figure>

<p>此写法也是我们用的最多的。</p>
<h3 id="外联接"><a href="#外联接" class="headerlink" title="外联接"></a>外联接</h3><p><strong>分类：</strong></p>
<ul>
<li>左外联接</li>
<li>右处联接。</li>
</ul>
<p>外联接是指不管有没有匹配，被定义了外联接的表数据都要出现在结果中。比如左外联接，那么在<code>JOIN</code>左边的表就被定义为外联接，那么此表中所有数据都会出现在查询结果中。</p>
<p>注意班级表中的四班是没有学生的，所以在内联接之后理所当然的被剔除了。现在以外联接做示例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  *</span><br><span class="line">FROM t_student s</span><br><span class="line">RIGHT JOIN t_class c ON s._fk &#x3D; c._infor;</span><br></pre></td></tr></table></figure>

<p>上面<code>SQL</code>中表<code>t_class</code>在写在<code>JOIN</code>的右边，所以我们用<code>RIGHT JOIN</code>来进行外联接。</p>
<p><img src="https://pic.downk.cc/item/5e85951e504f4bcb04d9d2c9.jpg" alt></p>
<p>最下面多了一行四班的信息</p>
<p>例如我们想查出还没有学生录入的班级信息：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  c._id,</span><br><span class="line">  c._cname,</span><br><span class="line">  c._code</span><br><span class="line">FROM t_student s</span><br><span class="line">RIGHT JOIN t_class c ON s._fk &#x3D; c._infor</span><br><span class="line">WHERE</span><br><span class="line">  s._id IS NULL;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e859544504f4bcb04d9f03f.jpg" alt><br>这就是外联接的用法，通常用在我们想要的数据匹配不上时。</p>
<h3 id="自联接"><a href="#自联接" class="headerlink" title="自联接"></a>自联接</h3><p>自联接属于内联接或外联接的一种特例，自联接所联接的表均是来自同一张，用法个人感觉还是比较巧妙的。</p>
<p>现有一表如下：</p>
<p><img src="https://pic.downk.cc/item/5e859558504f4bcb04d9fd75.jpg" alt></p>
<p>表中，6个人均属于某公司的员工。区别是李四为张三和王五的领导，张八为赵六和孙七的领导。<code>leader_id</code>与<code>work_id</code>相关联。</p>
<p>现在可以通过自联接巧妙的将一张表分为员工部分和领导部分：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  w.work_name,</span><br><span class="line">  l.work_name as &#39;领导姓名&#39;</span><br><span class="line">FROM t_emp w,</span><br><span class="line">  t_emp l</span><br><span class="line">WHERE</span><br><span class="line">  w.leader_id &#x3D; l.work_id;</span><br></pre></td></tr></table></figure>

<p>注意别名的用法</p>
<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e85957b504f4bcb04da132b.jpg" alt></p>
<p>是不是有点方便？</p>
<h2 id="知识点罗列到这里，做题时间到"><a href="#知识点罗列到这里，做题时间到" class="headerlink" title="知识点罗列到这里，做题时间到"></a>知识点罗列到这里，做题时间到</h2><h3 id="1-查询凤姐所在的班级"><a href="#1-查询凤姐所在的班级" class="headerlink" title="1.查询凤姐所在的班级"></a>1.查询凤姐所在的班级</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  _cname</span><br><span class="line">FROM t_student s,</span><br><span class="line">  t_class c</span><br><span class="line">WHERE</span><br><span class="line">  c._infor &#x3D; s._fk</span><br><span class="line">  AND s._name &#x3D; &#39;凤姐&#39;;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8595a1504f4bcb04da2d18.jpg" alt></p>
<h3 id="2-查询同朱军同班级的学生"><a href="#2-查询同朱军同班级的学生" class="headerlink" title="2.查询同朱军同班级的学生"></a>2.查询同朱军同班级的学生</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  s._name</span><br><span class="line">FROM t_student s</span><br><span class="line">WHERE</span><br><span class="line">  s._fk &#x3D; (</span><br><span class="line">    SELECT</span><br><span class="line">      cc._infor</span><br><span class="line">    FROM t_class cc,</span><br><span class="line">      t_student ss</span><br><span class="line">    WHERE</span><br><span class="line">      ss._fk &#x3D; cc._infor</span><br><span class="line">      AND ss._name &#x3D; &#39;朱军&#39;</span><br><span class="line">  )</span><br><span class="line">  AND s._name !&#x3D; &#39;朱军&#39;;</span><br></pre></td></tr></table></figure>

<p>本题中，括号内为联接后的表，其返回的是’朱军’所在班级的<code>_infor</code>，然后主查询在学生表中匹配与<code>_infor</code>相等的<code>_fk</code>的行，最后从匹配成功后的行中剔除’朱军’自己。</p>
<p><img src="https://pic.downk.cc/item/5e8595cd504f4bcb04da49e7.jpg" alt></p>
<h3 id="3-查询每个班级的人数"><a href="#3-查询每个班级的人数" class="headerlink" title="3.查询每个班级的人数"></a>3.查询每个班级的人数</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  d._cname,</span><br><span class="line">  COUNT(_name)</span><br><span class="line">FROM (</span><br><span class="line">    SELECT</span><br><span class="line">      ss.*,</span><br><span class="line">      cc._cname</span><br><span class="line">    FROM t_class cc</span><br><span class="line">    LEFT JOIN t_student ss ON ss._fk &#x3D; cc._infor</span><br><span class="line">  ) d</span><br><span class="line">GROUP BY</span><br><span class="line">  d._cname;</span><br></pre></td></tr></table></figure>

<p>本题中，括号内为班级表外联接后的表，并给该联接后的表以别名<code>d</code>，按<code>d</code>的班级名称<code>d._cname</code>分组后统计各班人数。这里之所以用外联接还是因为四班没有学生但依然要统计。</p>
<p><img src="https://pic.downk.cc/item/5e8595fb504f4bcb04da677c.jpg" alt></p>
<h3 id="4-查询班级人数最多的班级"><a href="#4-查询班级人数最多的班级" class="headerlink" title="4.查询班级人数最多的班级"></a>4.查询班级人数最多的班级</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  cc._cname,</span><br><span class="line">  COUNT(_name)</span><br><span class="line">FROM t_class cc,</span><br><span class="line">  t_student ss</span><br><span class="line">WHERE</span><br><span class="line">  cc._infor &#x3D; ss._fk</span><br><span class="line">GROUP BY</span><br><span class="line">  cc._cname</span><br><span class="line">HAVING</span><br><span class="line">  COUNT(_name) &gt;&#x3D; ALL(</span><br><span class="line">    SELECT</span><br><span class="line">      COUNT(_name)</span><br><span class="line">    FROM t_class c,</span><br><span class="line">      t_student s</span><br><span class="line">    WHERE</span><br><span class="line">      c._infor &#x3D; s._fk</span><br><span class="line">    GROUP BY</span><br><span class="line">      c._cname</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>这个有点凶残，用了两次表联接。括号内返回的是每个班的人数：</p>
<p><img src="https://pic.downk.cc/item/5e859619504f4bcb04da7a8a.jpg" alt><br>之后外部又使用了一次表联接，将每个班的人数与括号内的返回值逐一比较，得到最大值，然后找到最大值所在的班级。这里就体现了对<code>SQL</code>执行顺序的理解有多重要了，联接、分组、过滤等等的先后顺序。</p>
<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e85962a504f4bcb04da87a3.jpg" alt></p>
<h3 id="5-查询每个班中年龄最低的人"><a href="#5-查询每个班中年龄最低的人" class="headerlink" title="5.查询每个班中年龄最低的人"></a>5.查询每个班中年龄最低的人</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  cc._cname,</span><br><span class="line">  ss._name,</span><br><span class="line">  ss._age</span><br><span class="line">FROM t_student ss,</span><br><span class="line">  t_class cc</span><br><span class="line">WHERE</span><br><span class="line">  ss._fk &#x3D; cc._infor</span><br><span class="line">  AND ss._age &lt;&#x3D; ALL(</span><br><span class="line">    SELECT</span><br><span class="line">      MIN(s._age)</span><br><span class="line">    FROM t_student s</span><br><span class="line">    WHERE</span><br><span class="line">      ss._fk &#x3D; s._fk</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>本题中，括号内部返回一个学生表中的最小年龄，外部进行表联接后将年龄列对返回值进行比较，若小于等于返回的最小值那其本身也为最小值。</p>
<p>如果括号内部不加判断条件<code>WHERE ss._fk = s._fk</code>，则最后只会查询出一条年龄最小的数据，而并没有按我们想要的查询出每个班的最小值。</p>
<p>如：</p>
<p><img src="https://pic.downk.cc/item/5e859647504f4bcb04da99c0.jpg" alt><br>有人会问了既然按班分，用分组不就好了？但要注意的是最小年龄的人不只一个，而分组后每一个班只会显示一个人。所以这里用了关联条件<code>WHERE ss._fk = s._fk</code>来让内外表关联，从而统计出所有我们想要的值。</p>
<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e859654504f4bcb04daa1c5.jpg" alt></p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>SQL语句还是需要多多练习，熟能生巧。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">专业治头秃</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://hekun97@github.io/2020/10/14/sql-yu-ju-hui-zong/">http://hekun97@github.io/2020/10/14/sql-yu-ju-hui-zong/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://hekun97@github.io" target="_blank">专业治头秃的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a><a class="post-meta__tags" href="/tags/SQL/">SQL</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.pixabay.com/photo/2017/06/12/04/21/database-2394312_960_720.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.png" target="_blank"><img class="post-qr-code-img" src="/img/wechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.png" target="_blank"><img class="post-qr-code-img" src="/img/alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/10/14/git-note/"><img class="prev-cover" src="https://cdn.pixabay.com/photo/2020/10/01/22/31/moss-5619857_960_720.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Git笔记</div></div></a></div><div class="next-post pull-right"><a href="/2020/07/12/map/"><img class="next-cover" src="https://cdn.pixabay.com/photo/2020/05/26/17/57/cottages-5224102_960_720.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Map集合</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">专业治头秃</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/hekun97"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/hekun97" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:hek97@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E8%A1%A8%E7%9A%84%E6%93%8D%E4%BD%9C%E4%BB%A5%E5%8F%8A%E5%88%9B%E5%BB%BA%E7%BA%A6%E6%9D%9F%EF%BC%88%E4%B8%80%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">数据库与表的操作以及创建约束（一）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.</span> <span class="toc-text">对数据库的操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.2.1.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.2.2.</span> <span class="toc-text">查看数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.2.3.</span> <span class="toc-text">连接数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.2.4.</span> <span class="toc-text">查看当前连接数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.2.5.</span> <span class="toc-text">删除数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.</span> <span class="toc-text">MySQL数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E6%95%B0%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.1.</span> <span class="toc-text">整数数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.2.</span> <span class="toc-text">浮点数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E8%BF%9B%E5%BA%A6%E5%B0%8F%E6%95%B0"><span class="toc-number">1.3.3.</span> <span class="toc-text">高进度小数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.4.</span> <span class="toc-text">字符串数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.5.</span> <span class="toc-text">布尔类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.6.</span> <span class="toc-text">日期数据类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%A1%A8%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">1.4.</span> <span class="toc-text">对表的操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">1.4.1.</span> <span class="toc-text">创建表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%9A%84%E6%95%B0%E9%87%8F"><span class="toc-number">1.4.2.</span> <span class="toc-text">查看表的数量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">1.4.3.</span> <span class="toc-text">查看表的结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-number">1.4.4.</span> <span class="toc-text">删除表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E8%A1%A8"><span class="toc-number">1.4.5.</span> <span class="toc-text">复制表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E6%97%B6%E5%A4%8D%E5%88%B6%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84%E5%92%8C%E5%86%85%E5%AE%B9"><span class="toc-number">1.4.5.1.</span> <span class="toc-text">同时复制表的结构和内容</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AA%E5%A4%8D%E5%88%B6%E8%A1%A8%E7%BB%93%E6%9E%84%E8%80%8C%E4%B8%8D%E5%A4%8D%E5%88%B6%E8%A1%A8%E5%86%85%E5%AE%B9"><span class="toc-number">1.4.6.</span> <span class="toc-text">只复制表结构而不复制表内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="toc-number">1.4.7.</span> <span class="toc-text">修改表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%96%B0%E5%88%97"><span class="toc-number">1.4.7.1.</span> <span class="toc-text">添加新列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E5%88%97"><span class="toc-number">1.4.7.2.</span> <span class="toc-text">更改列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%88%97"><span class="toc-number">1.4.7.3.</span> <span class="toc-text">删除列</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-number">1.5.</span> <span class="toc-text">数据库完整性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E5%AE%8C%E6%95%B4%E6%80%A7%E2%80%93%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.5.1.</span> <span class="toc-text">实体完整性–主键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E5%AE%8C%E6%95%B4%E6%80%A7%E2%80%93%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.5.2.</span> <span class="toc-text">实体完整性–唯一约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%AE%8C%E6%95%B4%E6%80%A7%E2%80%93%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.5.3.</span> <span class="toc-text">域完整性–非空约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%AE%8C%E6%95%B4%E6%80%A7%E2%80%93%E9%BB%98%E8%AE%A4%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.5.4.</span> <span class="toc-text">域完整性–默认约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E5%AE%8C%E6%95%B4%E6%80%A7%E2%80%93%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.5.5.</span> <span class="toc-text">引用完整性–外键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%EF%BC%8C%E5%90%8C%E6%97%B6%E5%88%9B%E5%BB%BA%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.5.5.1.</span> <span class="toc-text">创建表时，同时创建约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%B2%E5%88%9B%E5%BB%BA%E8%A1%A8%E5%90%8E%EF%BC%8C%E8%BF%BD%E5%8A%A0%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.5.5.2.</span> <span class="toc-text">已创建表后，追加外键约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.5.5.3.</span> <span class="toc-text">删除外键约束</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%BF%AE%E6%94%B9%E3%80%81%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%EF%BC%88%E4%BA%8C%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">数据修改、数据查询（二）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8-1"><span class="toc-number">2.1.</span> <span class="toc-text">创建表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%BF%AE%E6%94%B9"><span class="toc-number">2.2.</span> <span class="toc-text">数据修改</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%96%B0%E6%95%B0%E6%8D%AE%EF%BC%9A"><span class="toc-number">2.2.1.</span> <span class="toc-text">添加新数据：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E6%95%B0%E6%8D%AE%EF%BC%9A"><span class="toc-number">2.2.2.</span> <span class="toc-text">更改数据：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%EF%BC%88%E8%A1%8C%EF%BC%89"><span class="toc-number">2.2.3.</span> <span class="toc-text">删除数据（行）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C"><span class="toc-number">2.3.</span> <span class="toc-text">查询操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%95%E5%BD%B1%E6%93%8D%E4%BD%9C"><span class="toc-number">2.3.1.</span> <span class="toc-text">投影操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E9%99%A4%E9%87%8D%E5%A4%8D%E2%80%94%E2%80%94DISTINCT"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">排除重复——DISTINCT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E9%99%90%E5%AE%9A%E8%A1%8C%E6%95%B0%E7%9A%84%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94LIMIT"><span class="toc-number">2.3.1.2.</span> <span class="toc-text">返回限定行数的查询——LIMIT</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%EF%BC%9A%E9%80%89%E6%8B%A9%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94WHERE"><span class="toc-number">2.3.2.</span> <span class="toc-text">条件查询：选择操作——WHERE</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E8%8C%83%E5%9B%B4%E2%80%94%E2%80%94BETWEEN"><span class="toc-number">2.3.2.1.</span> <span class="toc-text">选择范围——BETWEEN</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E9%9B%86%E5%90%88%E2%80%94%E2%80%94IN%E6%88%96NOT-IN"><span class="toc-number">2.3.2.2.</span> <span class="toc-text">定义集合——IN或NOT IN</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94LIKE"><span class="toc-number">2.3.2.3.</span> <span class="toc-text">模糊查询——LIKE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E7%A9%BA%E5%80%BC%E6%95%B0%E6%8D%AE"><span class="toc-number">2.3.2.4.</span> <span class="toc-text">处理空值数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94ORDER-BY%EF%BC%9A"><span class="toc-number">2.3.3.</span> <span class="toc-text">排序操作——ORDER BY：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%90%8E%E4%B8%80%E5%AE%9A%E8%A6%81%E6%B3%A8%E6%84%8F%EF%BC%81"><span class="toc-number">2.4.</span> <span class="toc-text">最后一定要注意！</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E3%80%81%E5%88%86%E7%BB%84%E3%80%81%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%8F%8A%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2%EF%BC%88%E4%B8%89%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">聚合函数、分组、子查询及组合查询（三）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-number">3.1.</span> <span class="toc-text">聚合函数：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E5%88%97%E3%80%81%E8%A1%8C%E8%AE%A1%E6%95%B0%EF%BC%88count%EF%BC%89"><span class="toc-number">3.1.1.</span> <span class="toc-text">执行列、行计数（count）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%88%97%E5%90%88%E8%AE%A1%E5%80%BC%EF%BC%88SUM%EF%BC%89"><span class="toc-number">3.1.2.</span> <span class="toc-text">返回列合计值（SUM）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%88%97%E5%B9%B3%E5%9D%87%E5%80%BC%EF%BC%88AVG%EF%BC%89"><span class="toc-number">3.1.3.</span> <span class="toc-text">返回列平均值（AVG）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E6%9C%80%E5%A4%A7%E5%80%BC-%E6%9C%80%E5%B0%8F%E5%80%BC%EF%BC%88MAX-MIN%EF%BC%89"><span class="toc-number">3.1.4.</span> <span class="toc-text">返回最大值&#x2F;最小值（MAX&#x2F;MIN）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E7%BB%84%EF%BC%88GROUP-BY"><span class="toc-number">3.2.</span> <span class="toc-text">数据分组（GROUP BY)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HAVING%E8%BF%87%E6%BB%A4%E6%9D%A1%E4%BB%B6"><span class="toc-number">3.2.1.</span> <span class="toc-text">HAVING过滤条件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="toc-number">3.3.</span> <span class="toc-text">子查询：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8SELECT%E4%B8%AD%E5%B5%8C%E5%A5%97"><span class="toc-number">3.3.1.</span> <span class="toc-text">在SELECT中嵌套</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8WHERE%E4%B8%AD%E5%B5%8C%E5%A5%97"><span class="toc-number">3.3.2.</span> <span class="toc-text">在WHERE中嵌套</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">3.3.3.</span> <span class="toc-text">子查询的分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.4.</span> <span class="toc-text">组合查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">3.5.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%A8%E8%81%94%E6%8E%A5%E4%B8%8E%E8%81%94%E6%8E%A5%E6%9F%A5%E8%AF%A2%EF%BC%88%E5%9B%9B%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">表联接与联接查询（四）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80-1"><span class="toc-number">4.1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E8%81%94%E6%8E%A5"><span class="toc-number">4.2.</span> <span class="toc-text">表联接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E8%81%94%E6%8E%A5%E7%9A%84%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-number">4.3.</span> <span class="toc-text">表联接的分类：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%81%94%E6%8E%A5"><span class="toc-number">4.3.1.</span> <span class="toc-text">内联接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E8%81%94%E6%8E%A5"><span class="toc-number">4.3.2.</span> <span class="toc-text">外联接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E8%81%94%E6%8E%A5"><span class="toc-number">4.3.3.</span> <span class="toc-text">自联接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E7%BD%97%E5%88%97%E5%88%B0%E8%BF%99%E9%87%8C%EF%BC%8C%E5%81%9A%E9%A2%98%E6%97%B6%E9%97%B4%E5%88%B0"><span class="toc-number">4.4.</span> <span class="toc-text">知识点罗列到这里，做题时间到</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%9F%A5%E8%AF%A2%E5%87%A4%E5%A7%90%E6%89%80%E5%9C%A8%E7%9A%84%E7%8F%AD%E7%BA%A7"><span class="toc-number">4.4.1.</span> <span class="toc-text">1.查询凤姐所在的班级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9F%A5%E8%AF%A2%E5%90%8C%E6%9C%B1%E5%86%9B%E5%90%8C%E7%8F%AD%E7%BA%A7%E7%9A%84%E5%AD%A6%E7%94%9F"><span class="toc-number">4.4.2.</span> <span class="toc-text">2.查询同朱军同班级的学生</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%9F%A5%E8%AF%A2%E6%AF%8F%E4%B8%AA%E7%8F%AD%E7%BA%A7%E7%9A%84%E4%BA%BA%E6%95%B0"><span class="toc-number">4.4.3.</span> <span class="toc-text">3.查询每个班级的人数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9F%A5%E8%AF%A2%E7%8F%AD%E7%BA%A7%E4%BA%BA%E6%95%B0%E6%9C%80%E5%A4%9A%E7%9A%84%E7%8F%AD%E7%BA%A7"><span class="toc-number">4.4.4.</span> <span class="toc-text">4.查询班级人数最多的班级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%9F%A5%E8%AF%A2%E6%AF%8F%E4%B8%AA%E7%8F%AD%E4%B8%AD%E5%B9%B4%E9%BE%84%E6%9C%80%E4%BD%8E%E7%9A%84%E4%BA%BA"><span class="toc-number">4.4.5.</span> <span class="toc-text">5.查询每个班中年龄最低的人</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AF%AD"><span class="toc-number">4.5.</span> <span class="toc-text">结语</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/12/20/case/" title="无题"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2021/12/20/case/" title="无题">无题</a><time datetime="2021-12-20T14:18:32.388Z" title="发表于 2021-12-20 22:18:32">2021-12-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/21/el-jstl-note/" title="JSP进阶-MVC-EL表达式-JSTL"><img src="https://cdn.pixabay.com/photo/2021/07/02/09/39/cockpit-6381367_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JSP进阶-MVC-EL表达式-JSTL"/></a><div class="content"><a class="title" href="/2021/07/21/el-jstl-note/" title="JSP进阶-MVC-EL表达式-JSTL">JSP进阶-MVC-EL表达式-JSTL</a><time datetime="2021-07-21T02:14:52.000Z" title="发表于 2021-07-21 10:14:52">2021-07-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/20/javaweb-7-cookie-jsp-session/" title="Cookie-JSP-Session"><img src="https://cdn.pixabay.com/photo/2021/07/02/09/39/cockpit-6381367_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cookie-JSP-Session"/></a><div class="content"><a class="title" href="/2021/07/20/javaweb-7-cookie-jsp-session/" title="Cookie-JSP-Session">Cookie-JSP-Session</a><time datetime="2021-07-20T09:26:52.000Z" title="发表于 2021-07-20 17:26:52">2021-07-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/11/hexoknowledge/" title="hexo的更多知识"><img src="https://cdn.pixabay.com/photo/2020/03/13/14/06/dead-sea-4927978_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="hexo的更多知识"/></a><div class="content"><a class="title" href="/2021/07/11/hexoknowledge/" title="hexo的更多知识">hexo的更多知识</a><time datetime="2021-07-11T08:38:40.000Z" title="发表于 2021-07-11 16:38:40">2021-07-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/11/javaweb-6-response-note/" title="Response相关知识"><img src="https://cdn.pixabay.com/photo/2021/07/02/09/39/cockpit-6381367_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Response相关知识"/></a><div class="content"><a class="title" href="/2021/07/11/javaweb-6-response-note/" title="Response相关知识">Response相关知识</a><time datetime="2021-07-11T06:36:52.000Z" title="发表于 2021-07-11 14:36:52">2021-07-11</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By 专业治头秃</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://hekun97.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  if (typeof gtag === 'function') {
    gtag('config', '', {'page_path': window.location.pathname});
  }

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>