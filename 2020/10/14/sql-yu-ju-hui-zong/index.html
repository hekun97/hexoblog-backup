<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SQL语句汇总 | 专业治头秃的博客</title><meta name="keywords" content="MySQL,SQL"><meta name="author" content="专业治头秃"><meta name="copyright" content="专业治头秃"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="数据库与表的操作以及创建约束（一）前言此文旨在汇总从建立数据库到联接查询等绝大部分SQL语句。SQL语句虽不能说很多，但稍有时间不写就容易出错。 SQL是 Structured Query Language 即“结构化查询语言”的简称，它是用来管理关系型数据库的。 其包括：  数据控制语言（DCL）(Data Control Language)【使用最少】 是用来设置或更改数据库用户或角色权限的语">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL语句汇总">
<meta property="og:url" content="http://hekun97@github.io/2020/10/14/sql-yu-ju-hui-zong/index.html">
<meta property="og:site_name" content="专业治头秃的博客">
<meta property="og:description" content="数据库与表的操作以及创建约束（一）前言此文旨在汇总从建立数据库到联接查询等绝大部分SQL语句。SQL语句虽不能说很多，但稍有时间不写就容易出错。 SQL是 Structured Query Language 即“结构化查询语言”的简称，它是用来管理关系型数据库的。 其包括：  数据控制语言（DCL）(Data Control Language)【使用最少】 是用来设置或更改数据库用户或角色权限的语">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.pixabay.com/photo/2017/06/12/04/21/database-2394312_960_720.jpg">
<meta property="article:published_time" content="2020-10-14T02:47:49.000Z">
<meta property="article:modified_time" content="2022-09-27T06:34:12.252Z">
<meta property="article:author" content="专业治头秃">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="SQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.pixabay.com/photo/2017/06/12/04/21/database-2394312_960_720.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://hekun97@github.io/2020/10/14/sql-yu-ju-hui-zong/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":500,"languages":{"author":"作者: 专业治头秃","link":"链接: ","source":"来源: 专业治头秃的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-09-27 14:34:12'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="专业治头秃的博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">10</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Java基础</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/2020/12/01/java-ji-chu-bi-ji/"><i class="fa-fw fas fa-male"></i><span> 面向对象编程</span></a></li><li><a class="site-page" href="/2021/06/30/java-ji-chu-2.jdbc-bi-ji/"><i class="fa-fw fas fa-adjust"></i><span> JDBC相关知识</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> JavaWEB</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/2021/06/24/javaweb-1.tomcat-ji-chu-zhi-shi/"><i class="fa-fw fas fa-certificate"></i><span> Tomcat基础知识</span></a></li><li><a class="site-page" href="/2021/06/24/javaweb-2.jiang-tomcat-ji-cheng-dao-idea-zhong/"><i class="fa-fw fas fa-code"></i><span> 将Tomcat集成到IDEA中</span></a></li><li><a class="site-page" href="/2021/06/24/javaweb-3.servlet-kuai-su-ru-men/"><i class="fa-fw fas fa-rocket"></i><span> Servlet快速入门</span></a></li><li><a class="site-page" href="/2021/06/24/javaweb-4.servlet-http-request-bi-ji/"><i class="fa-fw fas fa-fire"></i><span> Servlet&amp;HTTP&amp;Request</span></a></li><li><a class="site-page" href="/2021/06/28/javaweb-5.servlet-http-request-lian-xi-deng-lu-an-li/"><i class="fa-fw fas fa-users"></i><span> 练习案例 - 用户登录</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.pixabay.com/photo/2017/06/12/04/21/database-2394312_960_720.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">专业治头秃的博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Java基础</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/2020/12/01/java-ji-chu-bi-ji/"><i class="fa-fw fas fa-male"></i><span> 面向对象编程</span></a></li><li><a class="site-page" href="/2021/06/30/java-ji-chu-2.jdbc-bi-ji/"><i class="fa-fw fas fa-adjust"></i><span> JDBC相关知识</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> JavaWEB</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/2021/06/24/javaweb-1.tomcat-ji-chu-zhi-shi/"><i class="fa-fw fas fa-certificate"></i><span> Tomcat基础知识</span></a></li><li><a class="site-page" href="/2021/06/24/javaweb-2.jiang-tomcat-ji-cheng-dao-idea-zhong/"><i class="fa-fw fas fa-code"></i><span> 将Tomcat集成到IDEA中</span></a></li><li><a class="site-page" href="/2021/06/24/javaweb-3.servlet-kuai-su-ru-men/"><i class="fa-fw fas fa-rocket"></i><span> Servlet快速入门</span></a></li><li><a class="site-page" href="/2021/06/24/javaweb-4.servlet-http-request-bi-ji/"><i class="fa-fw fas fa-fire"></i><span> Servlet&amp;HTTP&amp;Request</span></a></li><li><a class="site-page" href="/2021/06/28/javaweb-5.servlet-http-request-lian-xi-deng-lu-an-li/"><i class="fa-fw fas fa-users"></i><span> 练习案例 - 用户登录</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SQL语句汇总</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-10-14T02:47:49.000Z" title="发表于 2020-10-14 10:47:49">2020-10-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-09-27T06:34:12.252Z" title="更新于 2022-09-27 14:34:12">2022-09-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/SQL/">SQL</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>29分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1><span id="数据库与表的操作以及创建约束一">数据库与表的操作以及创建约束（一）</span></h1><h2><span id="前言">前言</span></h2><p>此文旨在汇总从建立数据库到联接查询等绝大部分<code>SQL</code>语句。<code>SQL</code>语句虽不能说很多，但稍有时间不写就容易出错。</p>
<p><code>SQL</code>是 <code>Structured Query Language</code> 即“结构化查询语言”的简称，它是用来管理关系型数据库的。</p>
<p>其包括：</p>
<ol>
<li><p>数据控制语言（<code>DCL</code>）(<code>Data Control Language</code>)【使用最少】</p>
<p>是用来设置或更改数据库用户或角色权限的语句，包括（<code>grant</code>,<code>deny</code>,<code>revoke</code>等）语句。在默认状态下，只有<code>sysadmin</code>,<code>dbcreator</code>,<code>db_owner</code>或<code>db_securityadmin</code>等人员才有权力执行<code>DCL</code></p>
</li>
<li><p>数据定义语言（<code>DDL</code>）(<code>Data Definition Language</code>)</p>
<p><code>DDL</code>允许用户定义数据，也就是创建表、删除表、修改表结构这些操作。通常，<code>DDL</code>由数据库管理员执行。</p>
</li>
<li><p>数据查询语言（<code>DQL</code>）(<code>Data Query Language</code>)【使用最多，其中的联合查询内容最重要】</p>
<p><code>DQL</code>允许用户查询数据，这也是通常最频繁的数据库日常操作</p>
</li>
<li><p>数据操作语言（<code>DML</code>）(<code>Data Manipulation Language</code>)</p>
<p><code>DML</code>为用户提供添加、删除、更新数据的能力，这些是应用程序对数据库的日常操作。</p>
</li>
</ol>
<h2><span id="语法特点">语法特点</span></h2><p>SQL语言关键字不区分大小写！！！但是，针对不同的数据库，对于表名和列名，有的数据库区分大小写，有的数据库不区分大小写。同一个数据库，有的在<code>Linux</code>上区分大小写，有的在<code>Windows</code>上不区分大小写。</p>
<p>所以，本教程约定：SQL关键字总是大写，以示突出，表名和列名均使用小写。</p>
<h2><span id="对数据库的操作">对数据库的操作</span></h2><h3><span id="创建数据库">创建数据库</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE 数据库名;</span><br></pre></td></tr></table></figure>

<p>数据库名命名规则：</p>
<ul>
<li><p>第一个字符必须为下列之一：<font color="green">字母、下划线、#及@符号。</font></p>
</li>
<li><p>后续字符由<font color="green">字母、十进制数、下划线、#、$及@符号</font>组成。</p>
</li>
<li><p>不能为<font color="green">RDBMS（关系型数据库管理系统）</font>的保留关键字。</p>
</li>
<li><p>不允许<font color="green">空格及其他字符</font>。</p>
</li>
</ul>
<p>本文以<code>SQLyog</code>软件为例，创建数据库如下：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE test_sql;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8585d1504f4bcb04ce88cd.jpg"></p>
<p>此图为<code>SQLyog</code>的左侧目录栏，前三个为本地自带数据库。将<code>SQL</code>语句全部选中运行（<code>F8</code>）后，<code>F5</code>刷新目录栏，出现了我们创建的数据库。</p>
<h3><span id="查看数据库">查看数据库</span></h3><p>查看当前有几个数据库可供连接。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> DATABASES;</span><br></pre></td></tr></table></figure>

<h3><span id="连接数据库">连接数据库</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">USE test_sql;</span><br></pre></td></tr></table></figure>

<h3><span id="查看当前连接数据库">查看当前连接数据库</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATABASE();</span><br></pre></td></tr></table></figure>

<h3><span id="删除数据库">删除数据库</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE test_sql;</span><br></pre></td></tr></table></figure>

<h2><span id="mysql数据类型">MySQL数据类型</span></h2><p>接下来就开始创建表了，在创建表之前先列出几种常用的数据类型</p>
<h3><span id="整数数据类型">整数数据类型</span></h3><table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>类型</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>INT</code></td>
<td>整型</td>
<td>4字节整数类型，范围约<code>+/-21亿</code></td>
</tr>
<tr>
<td><code>BIGINT</code></td>
<td>长整型</td>
<td>8字节整数类型，范围约<code>+/-922亿亿</code></td>
</tr>
</tbody></table>
<h3><span id="浮点数据类型">浮点数据类型</span></h3><table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>类型</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>FLOAT</code>或<code>REAL</code></td>
<td>浮点型</td>
<td>4字节浮点数，范围约<code>+/-1038</code>，精度7位小数</td>
</tr>
<tr>
<td><code>DOUBLE</code></td>
<td>浮点型</td>
<td>8字节浮点数，范围约<code>+/-10308</code>，精度15位小数</td>
</tr>
</tbody></table>
<blockquote>
<p>因为不精准，因此不能使用在货币这类严格要求准确的位置，通常我们更经常使用整数类型用来计算货币。</p>
</blockquote>
<h3><span id="高精度小数">高精度小数</span></h3><table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>类型</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>DECIMAL(M,N)</code></td>
<td>高精度小数</td>
<td>由用户指定精度的小数，例如，<code>DECIMAL(20,10)</code>表示一共20位，其中小数10位，通常用于财务计算</td>
</tr>
</tbody></table>
<h3><span id="字符串数据类型">字符串数据类型</span></h3><table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>类型</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>CHAR(N)</code></td>
<td>定长字符串</td>
<td>存储指定长度的字符串，例如，<code>CHAR(100)</code>总是存储100个字符的字符串</td>
</tr>
<tr>
<td><code>VARCHAR(N)</code></td>
<td>变长字符串</td>
<td>存储可变长度的字符串，例如，<code>VARCHAR(100)</code>可以存储0~100个字符的字符串</td>
</tr>
</tbody></table>
<h3><span id="布尔类型">布尔类型</span></h3><table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>类型</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>BOOLEAN</code></td>
<td>布尔类型</td>
<td>存储True或者False</td>
</tr>
</tbody></table>
<h3><span id="日期数据类型">日期数据类型</span></h3><table>
<thead>
<tr>
<th><strong>名称</strong></th>
<th><strong>类型</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>DATE</code></td>
<td>日期类型</td>
<td>存储日期，例如，2018-06-22</td>
</tr>
<tr>
<td><code>TIME</code></td>
<td>时间类型</td>
<td>存储时间，例如，12:20:59</td>
</tr>
<tr>
<td><code>DATETIME</code></td>
<td>日期和时间类型</td>
<td>存储日期+时间，例如，2018-06-22 12:20:59</td>
</tr>
</tbody></table>
<h2><span id="对表的操作ddl">对表的操作(<code>DDL</code>)</span></h2><p>也就是前面说的 数据定义语言（<code>DDL</code>）(<code>Data Definition Language</code>)。</p>
<p>数据库中对表的操作有：</p>
<ul>
<li>创建表；</li>
<li>查看表的数量；</li>
<li>查看表的结构;</li>
<li>删除表；</li>
<li>复制表；<ul>
<li>复制表的结构及内容</li>
<li>只复制表的结构</li>
</ul>
</li>
<li>修改表；<ul>
<li>添加列</li>
<li>更改列</li>
<li>删除列</li>
</ul>
</li>
</ul>
<h3><span id="创建表">创建表</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span> 表名 <span class="operator">&gt;</span> (<span class="operator">&lt;</span> 列名 <span class="operator">&gt;</span> <span class="operator">&lt;</span> 列的数据类型 <span class="operator">&gt;</span> [<span class="operator">&lt;</span>列的约束<span class="operator">&gt;</span>]);</span><br></pre></td></tr></table></figure>

<p>如：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_student(</span><br><span class="line">  student_name <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">  student_birthday DATETIME,</span><br><span class="line">  student_phone <span class="type">INT</span>,</span><br><span class="line">  student_score <span class="type">FLOAT</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>上表中我们创建了一张学生表，并定义了姓名、生日、电话、得分四列，列名后加上数据类型。其中要注意的是<code>VARCHAR</code>需要在括号内设置字符串的最大长度。</p>
<p>刷新之后就可以看到我们创建的数据库中多了一张表：</p>
<p><img src="https://pic.downk.cc/item/5e858623504f4bcb04ceca12.jpg"></p>
<p>选择打开表可以直观的看到内容：</p>
<p><img src="https://pic.downk.cc/item/5e858643504f4bcb04cee0cf.jpg"></p>
<p>之后我们可以通过SQL语句也可以通过手动为表添加内容。</p>
<h3><span id="查看表的数量">查看表的数量</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br></pre></td></tr></table></figure>

<h3><span id="查看表的结构">查看表的结构</span></h3><p>如果你想要知道一个表的结构，可以使用<code>DESCRIBE</code>命令；它显示表中每个列的信息：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DESCRIBE</span> t_student;</span><br></pre></td></tr></table></figure>

<h3><span id="删除表">删除表</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> t_student;</span><br></pre></td></tr></table></figure>

<h3><span id="复制表">复制表</span></h3><h4><span id="同时复制表的结构和内容">同时复制表的结构和内容</span></h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> copy_student</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student;</span><br></pre></td></tr></table></figure>

<p>如此我们便复制了一张名为<code>copy_student</code>的表，它包括<code>t_student</code>表中的内容与结构。</p>
<blockquote>
<p><font color="red">注意：复制表的同时表的约束并不能复制过来。</font></p>
</blockquote>
<h3><span id="只复制表结构而不复制表内容">只复制表结构而不复制表内容</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> copy_student</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="number">1</span> <span class="operator">=</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>只需在<code>WHERE</code>条件中加入一个永不为真的值即可。</p>
<h3><span id="修改表">修改表</span></h3><h4><span id="添加新列">添加新列</span></h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t_student</span><br><span class="line"><span class="keyword">ADD</span></span><br><span class="line">  student_address <span class="type">VARCHAR</span>(<span class="number">50</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858643504f4bcb04cee0cf.jpg"></p>
<h4><span id="更改列">更改列</span></h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t_student</span><br><span class="line">CHANGE</span><br><span class="line">  student_birthday student_age <span class="type">INT</span>;</span><br></pre></td></tr></table></figure>

<p>这里我们把学生生日列（<code>student_birthday</code>）改为学生年龄列（<code>student_age</code>），<code>CHANGE</code>后第一个为旧列名，第二个为新列名。</p>
<p><img src="https://pic.downk.cc/item/5e85867c504f4bcb04cf0e43.jpg"></p>
<h4><span id="删除列">删除列</span></h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t_student</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">COLUMN</span></span><br><span class="line">  student_score;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8586ed504f4bcb04cf65cf.jpg"> </p>
<h2><span id="数据库完整性">数据库完整性</span></h2><p>保证数据库的完整性是为了防止垃圾数据的产生，以免影响数据库的执行效率。这里简要说一些，因为毕竟不是理论类的文章，这里主要是整理汇总<code>SQL</code>语句。</p>
<p><strong>分类：</strong></p>
<ol>
<li><p>实体完整性（主键约束，唯一约束）<br>保证一行数据是有效的</p>
</li>
<li><p>域完整性（非空约束，默认约束）<br>保证一列数据是有效的</p>
</li>
<li><p>引用完整性（外键约束）<br>保证引用的编号是有效的</p>
</li>
<li><p>用户自定义完整性<br>保证自定义规则</p>
</li>
</ol>
<h3><span id="实体完整性主键约束">实体完整性–主键约束</span></h3><p>关键字：<code>PRIMARY KEY</code></p>
<p>主键列不能为空也不能重复，通常加在表的id列中。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_student(</span><br><span class="line">  student_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  student_name <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">  student_birthday DATETIME,</span><br><span class="line">  student_phone <span class="type">INT</span>,</span><br><span class="line">  student_score <span class="type">FLOAT</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3><span id="实体完整性唯一约束">实体完整性–唯一约束</span></h3><p>关键字：<code>UNIQUE</code></p>
<p>唯一约束是指给定列的值必须唯一，与主键约束不同的是它可以为空。通常加在表中不能重复的信息中，如电话号码。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_student(</span><br><span class="line">  student_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  student_name <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">  student_birthday DATETIME,</span><br><span class="line">  student_phone <span class="type">INT</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">  student_score <span class="type">FLOAT</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3><span id="域完整性非空约束">域完整性–非空约束</span></h3><p>关键字：<code>NOT NULL</code></p>
<p>非空约束可以加在诸如姓名等列上。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_student(</span><br><span class="line">  student_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  student_name <span class="type">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  student_birthday DATETIME,</span><br><span class="line">  student_phone <span class="type">INT</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">  student_score <span class="type">FLOAT</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3><span id="域完整性默认约束">域完整性–默认约束</span></h3><p>关键字：<code>DEFAULT</code></p>
<p>设定默认值后，可以在添加此列时不指定值,数据库会自动填充设定的默认值。</p>
<p>现给学生表加入性别列，默认值设为“男”，这样添加新的学生信息时如果没有填写具体的性别均会默认为男性：  </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_student(</span><br><span class="line">  student_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  student_name <span class="type">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  student_sex <span class="type">VARCHAR</span>(<span class="number">5</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">  student_birthday DATETIME,</span><br><span class="line">  student_phone <span class="type">INT</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">  student_score <span class="type">FLOAT</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858713504f4bcb04cf85ed.jpg"></p>
<h3><span id="引用完整性外键约束">引用完整性–外键约束</span></h3><p>外键约束是指在外键关联主键上强制加上一个约束，如果违反该约束，则不允许该条数据的修改。可以通过两种方式创建，第一种是在创建表的同时创建约束，第二种是已经创建表后，再来创建约束。</p>
<h4><span id="1创建表时同时创建约束">1.创建表时，同时创建约束</span></h4><p>创建主表–班级表：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_class(</span><br><span class="line">  class_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  class_name <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>创建从表–学生表，并设置外键约束：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_student(</span><br><span class="line">  student_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  s_c_id <span class="type">INT</span>,</span><br><span class="line">  student_name <span class="type">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  student_sex <span class="type">VARCHAR</span>(<span class="number">5</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">  student_birthday DATETIME,</span><br><span class="line">  student_phone <span class="type">INT</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">  student_score <span class="type">FLOAT</span>,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> fk_class_id <span class="keyword">FOREIGN</span> KEY(s_c_id) <span class="keyword">REFERENCES</span> t_class(class_id);</span><br></pre></td></tr></table></figure>

<p>上面的第8行代码就是创建外键约束的方法，个人认为也是<code>SQL</code>语句中最难记的。</p>
<h4><span id="2已创建表后追加外键约束">2.已创建表后，追加外键约束</span></h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">table</span> t_student</span><br><span class="line"><span class="keyword">ADD</span></span><br><span class="line">  <span class="keyword">CONSTRAINT</span> fk_class_id <span class="keyword">FOREIGN</span> KEY(s_c_id) <span class="keyword">REFERENCES</span> t_class(class_id);</span><br></pre></td></tr></table></figure>

<p>这里值得注意的是，在追加约束时，如果我们已创建好的表中有不符合约束条件的数据，那么将会报错约束冲突，可以通过添加语句<code>WITH NOCHECK</code>解决，这样就只会对后面新加的数据进行校验，而前面已有的数据忽略不管。</p>
<p>上述语句可修改为如下：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">table</span> t_student <span class="keyword">WITH</span> NOCHECK</span><br><span class="line"><span class="keyword">ADD</span></span><br><span class="line">  <span class="keyword">CONSTRAINT</span> fk_class_id <span class="keyword">FOREIGN</span> KEY(s_c_id) <span class="keyword">REFERENCES</span> t_class(class_id);</span><br></pre></td></tr></table></figure>

<p>由于外键约束会降低数据库的性能，大部分互联网应用程序为了追求速度，并不设置外键约束，而是仅靠应用程序自身来保证逻辑的正确性。这种情况下，<code>s_c_id</code>仅仅是一个普通的列，只是它起到了外键的作用而已。</p>
<h4><span id="3删除外键约束">3.删除外键约束</span></h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t_student <span class="keyword">drop</span> <span class="keyword">FOREIGN</span> KEY fk_class_id;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：删除外键约束并没有删除外键这一列，只是去除外键将这一列（<code>s_c_id</code>）变为一个普通的列。删除列是通过<code>DROP COLUMN ...</code>实现的。</p>
</blockquote>
<h1><span id="数据修改-数据查询二">数据修改、数据查询（二）</span></h1><h2><span id="创建表">创建表</span></h2><p>首先创建一张表如下，创建表的方法介绍过了，这里就不再赘述。</p>
<p><img src="https://pic.downk.cc/item/5e858868504f4bcb04d08c36.jpg"></p>
<h2><span id="数据修改dml">数据修改(DML)</span></h2><ul>
<li>添加新数据</li>
<li>更改数据</li>
<li>删除数据（行）</li>
</ul>
<h3><span id="添加新数据">添加新数据：</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="operator">&lt;</span> 表名 <span class="operator">&gt;</span> </span><br><span class="line">  (<span class="operator">&lt;</span> 列名列表 <span class="operator">&gt;</span>)</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">  (<span class="operator">&lt;</span> 值列表 <span class="operator">&gt;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>如：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_student (</span><br><span class="line">    student_id,</span><br><span class="line">    student_name,</span><br><span class="line">    student_age,</span><br><span class="line">    student_sex</span><br><span class="line">  )</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">  (<span class="number">1</span>, <span class="string">&#x27;大毛&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;男&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e85889d504f4bcb04d0b802.jpg"><br>其中列名可以省略，省略之后要求插入的值必须与列一一对应：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_student</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">  (<span class="number">2</span>, <span class="string">&#x27;王二&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;男&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8588f6504f4bcb04d10c43.jpg"></p>
<p><strong>多行数据添加：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_student</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">  (<span class="number">3</span>, <span class="string">&#x27;张三&#x27;</span>, <span class="number">22</span>, <span class="string">&#x27;男&#x27;</span>),</span><br><span class="line">  (<span class="number">4</span>, <span class="string">&#x27;李四&#x27;</span>, <span class="number">17</span>, <span class="string">&#x27;女&#x27;</span>),</span><br><span class="line">  (<span class="number">5</span>, <span class="string">&#x27;王五&#x27;</span>, <span class="number">23</span>, <span class="string">&#x27;男&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8588f6504f4bcb04d10c43.jpg"></p>
<h3><span id="更改数据">更改数据：</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表名</span><br><span class="line"><span class="keyword">SET</span></span><br><span class="line">  列<span class="number">1</span> <span class="operator">=</span> 新值<span class="number">1</span>,</span><br><span class="line">  列<span class="number">2</span> <span class="operator">=</span> 新值<span class="number">2</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  过滤条件</span><br></pre></td></tr></table></figure>

<p>假如要修改李四的年龄为21岁</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> t_student</span><br><span class="line"><span class="keyword">SET</span></span><br><span class="line">  student_age <span class="operator">=</span> <span class="number">21</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  student_name <span class="operator">=</span> <span class="string">&#x27;李四&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858953504f4bcb04d15f04.jpg"></p>
<p><font color="red">注：修改多个列的值时用逗号隔开。要想设置某一列的值为空，只需让<code>&lt;列名&gt;=NULL</code> 即可。<code>WHERE</code>表示过滤条件。</font></p>
<h3><span id="删除数据行">删除数据（行）</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  过滤条件</span><br></pre></td></tr></table></figure>

<p>现要删除20到22岁的学生信息：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  student_age <span class="keyword">BETWEEN</span> <span class="number">20</span></span><br><span class="line">  <span class="keyword">AND</span> <span class="number">22</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8589b5504f4bcb04d1aa51.jpg"></p>
<p><code>WHERE</code>的判断条件之后会更详细的介绍。</p>
<p>删除除了<code>DELETE</code>还有一种方法<code>TRUNCATE</code>，写法：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> 表名;</span><br></pre></td></tr></table></figure>

<p><strong>二者区别在于：</strong><br><code>DELETE</code>会记录日志，意味着删除后的数据还可以恢复，但是效率低。<code>TRUNCATE</code>不会记录日志，删除后的数据不能恢复，但是效率高。需要注意的是，<code>TRUNCATE</code>不能用于有外键约束引用的表。</p>
<h2><span id="查询操作dql">查询操作(DQL)</span></h2><h3><span id="基本查询">基本查询</span></h3><p>要查询数据库表的数据，我们使用如下的SQL语句：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>

<p>要查询<code>t_students</code>表的所有行，我们用如下SQL语句：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t_students;</span><br></pre></td></tr></table></figure>

<p>其中<code>SELECT</code>是关键字，表示将要执行一个查询，<code>*</code>表示“所有列（字段）”，<code>FROM</code>表示将要从哪个表查询，本例中是<code>t_students</code>表。</p>
<p>该SQL将查询出<code>t_students</code>表的所有数据。</p>
<p>再来看一条查询语句。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span><span class="operator">+</span><span class="number">200</span>;</span><br></pre></td></tr></table></figure>

<p>上述查询会直接计算出表达式的结果<code>300</code>。虽然<code>SELECT</code>可以用作计算，但它并不是SQL的强项。但是，不带<code>FROM</code>子句的<code>SELECT</code>语句有一个有用的用途，就是用来判断当前到数据库的连接是否有效。许多检测工具会执行一条<code>SELECT 1;</code>来测试数据库连接。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>这也是我们在使用大部分数据库连接软件测试连接时使用的语句。</p>
<p><img src="https://cdn.jsdelivr.net/gh/hekun97/picture/Git_notes/image-20220908003854140.png" alt="image-20220908003854140"></p>
<h3><span id="条件查询">条件查询</span></h3><p>也就是执行选择操作，关键字是：<code>WHERE</code></p>
<p>指定哪些行出现在结果中</p>
<ul>
<li>单条件选择</li>
<li>多条件选择</li>
</ul>
<p>1.<strong>单条件选择标准结构：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  列<span class="number">1</span>,</span><br><span class="line">  列<span class="number">2</span></span><br><span class="line"><span class="keyword">FROM</span> 表名</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  列<span class="number">3</span> <span class="operator">=</span> 值</span><br></pre></td></tr></table></figure>

<p>关系运算符包括：<code>&gt;  &gt;=  &lt;  &lt;=  =  !=</code></p>
<p>2.<strong>多条件选择标准结构：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  列A,</span><br><span class="line">  列B</span><br><span class="line"><span class="keyword">FROM</span> 表</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  条件<span class="number">1</span> </span><br><span class="line">    <span class="keyword">AND</span> 或者 <span class="keyword">OR</span> 或者 <span class="keyword">NOT</span></span><br><span class="line">  条件<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>其中<code>AND</code>表示并且，<code>OR</code>表示或者，<code>NOT</code>表示排序符合此条件的记录。</p>
<p>如：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  s_id , </span><br><span class="line">  s_name </span><br><span class="line"><span class="keyword">from</span> students </span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">  s_id <span class="operator">&lt;</span> <span class="number">8</span> </span><br><span class="line">    <span class="keyword">and</span> </span><br><span class="line">  s_sex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>如果不加括号，条件运算按照<code>NOT</code>、<code>AND</code>、<code>OR</code>的优先级进行，即<code>NOT</code>优先级最高，其次是<code>AND</code>，最后是<code>OR</code>。加上括号可以改变优先级。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  s_id , </span><br><span class="line">  s_name </span><br><span class="line"><span class="keyword">from</span> students </span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">  (s_id <span class="operator">&lt;</span> <span class="number">8</span> <span class="keyword">or</span> s_age<span class="operator">&gt;</span><span class="number">23</span>)</span><br><span class="line">     </span><br><span class="line">  s_sex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>这里就会先执行<code>or</code>，然后再执行后面的<code>and</code>，我们在实际使用中遇到多个条件运算符时，尽量加上括号，方便更好的阅读。</p>
<h4><span id="选择范围">选择范围</span></h4><p>关键字：<code>BETWEEN</code></p>
<p><code>BETWEEN</code>后的值为从下限到上限。</p>
<p>如：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  student_age <span class="keyword">BETWEEN</span> <span class="number">20</span></span><br><span class="line">  <span class="keyword">AND</span> <span class="number">23</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858c9c504f4bcb04d3bc84.jpg"></p>
<h3><span id="投影查询">投影查询</span></h3><p>用于指定查询结果中能显示哪些列。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 列<span class="number">1</span>, 列<span class="number">2</span> <span class="keyword">FROM</span> 表名</span><br></pre></td></tr></table></figure>

<p>多个列中间用逗号隔开，如果选择所有列可以用<code>*</code>号简写。</p>
<p>还是此表：</p>
<p><img src="https://pic.downk.cc/item/5e858953504f4bcb04d15f04.jpg"></p>
<p>现在只想要查看姓名和年龄列：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> student_name, student_age <span class="keyword">FROM</span> t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858b21504f4bcb04d2a9a9.jpg"></p>
<h4><span id="组合查询concat">组合查询（CONCAT）</span></h4><p>当我们需要将两列的数据放在一列（字段）中时，可以使用<code>CONCAT</code>来进行组合查询。</p>
<p>注意这里不是把其他列删除了，而是只显示我们想看见的部分。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT(student_name, <span class="string">&#x27;——&#x27;</span>, student_age) <span class="string">&#x27;组合值&#x27;</span> <span class="keyword">FROM</span> t_student;</span><br></pre></td></tr></table></figure>

<p><code>CONCAT</code>中除了需要的列（字段），还可以添加字符将列与列之间用想要的符号连接起来，这里使用的是字符<code>&#39;--&#39;</code>  。</p>
<p><img src="https://pic.downk.cc/item/5e858b6d504f4bcb04d2e262.jpg"></p>
<h4><span id="排除重复distinct">排除重复（DISTINCT）</span></h4><p>现给原表加入一班级列<code>student_class</code>。</p>
<p><img src="https://pic.downk.cc/item/5e858baa504f4bcb04d30d15.jpg"></p>
<p>查询班级列得到：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> student_class <span class="keyword">FROM</span> t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858bba504f4bcb04d31704.jpg"></p>
<p>但是我们只想查看具体有哪些班级，这里就需要用到去重，也就是<code>DISTINCT</code>。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> student_class <span class="keyword">FROM</span> t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858bd7504f4bcb04d32e9b.jpg"></p>
<h4><span id="定义集合in或not-in">定义集合（IN或NOT IN）</span></h4><p>现在想查看年龄为17、20、23的学生信息： </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  student_age <span class="keyword">IN</span> (<span class="number">17</span>, <span class="number">20</span>, <span class="number">23</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858cca504f4bcb04d3d9f6.jpg"><br>反之<code>NOT IN</code>就是选择不包括在集合里的学生信息。</p>
<h4><span id="模糊查询like">模糊查询（LIKE）</span></h4><p>为了更好的解释模糊查询，这里重新建张表<code>tt_student</code>。</p>
<p><img src="https://pic.downk.cc/item/5e858ce6504f4bcb04d3ea6c.jpg"></p>
<p>这里姓王的兄弟们躺枪…别介意。</p>
<p><strong>首先先说下占位符与通配符：</strong></p>
<p>占位符 <code>_</code>，表示任何单个字符。</p>
<p>通配符 <code>%</code>，表示包含零或多个字符。</p>
<p>下面就来用模糊查询逐一选中我们想要的行。</p>
<p><strong>名字只有两个字的：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  student_name <span class="keyword">LIKE</span> <span class="string">&#x27;__&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>这里可能看不清，引号里实际是两个占位符。</p>
<p><img src="https://pic.downk.cc/item/5e858d07504f4bcb04d400b9.jpg"></p>
<p><strong>所有姓王的：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  student_name <span class="keyword">LIKE</span> <span class="string">&#x27;王%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858d22504f4bcb04d411df.jpg"></p>
<p><strong>最后一个字是“王”的：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  student_name <span class="keyword">LIKE</span> <span class="string">&#x27;%王&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858d59504f4bcb04d43c32.jpg"><br><strong>只要是名字中有“王”字的：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  student_name <span class="keyword">LIKE</span> <span class="string">&#x27;%王%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858d69504f4bcb04d448d9.jpg"><br>这下模糊查询就很明白了吧，当然还有其他组合，大家可以自己尝试。</p>
<blockquote>
<p><code>LIKE</code>是模糊查询这些数据，<code>NOT LIKE</code>刚好相反，也就是不需要这些模糊查询出来的数据。</p>
</blockquote>
<h4><span id="处理空值数据">处理空值数据</span></h4><p>判断条件不能用<code>列名=NULL</code>，而是要用<code>IS NULL</code>或<code>IS NOT NULL</code>。</p>
<p><strong>标准写法：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  student_age <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<h3><span id="排序查询order-by">排序查询（ORDER BY）</span></h3><p>指定查询的结果以什么样的顺序显示。</p>
<p>使用<code>ORDER BY</code>时，列名上指定<code>ASC</code>或<code>DESC</code>。<code>ASC</code>表示正序，<code>DESC</code>表示倒序。如果不指定则默认为正序。</p>
<p><strong>按年龄排：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  student_age <span class="keyword">ASC</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858dc8504f4bcb04d4a68a.jpg"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  student_age <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858dc8504f4bcb04d4a68a.jpg"></p>
<h3><span id="分页查询">分页查询</span></h3><p>使用SELECT查询时，如果结果集数据量很大，比如几万行数据，放在一个页面显示的话数据量太大，且对数据库的压力也大，不如分页显示，每次显示100条，也每次从数据库拿100条数据。</p>
<p>要实现分页功能，实际上就是从结果集中显示第1<del>100条记录作为第1页，显示第101</del>200条记录作为第2页，以此类推。</p>
<p>因此，分页实际上就是从结果集中“截取”出第M~N条记录。这个查询可以通过<code>LIMIT N OFFSET M</code>子句实现。</p>
<p>其中：</p>
<p>LIMIT 为返回限定行数的查询，</p>
<p><code>LIMIT N</code> 表示从第一行开始返回 <code>N</code> 行结果;</p>
<p><code>LIMIT N OFFSET M</code>中的<code>OFFSET M</code>为偏移量，就记录集索引<code>M</code>之前的数据不管，从索引<code>M</code>开始返回<code>N</code>行结果。</p>
<h4><span id="实操步骤">实操步骤</span></h4><p>这里使用上面模糊操作中的表<code>tt_student</code>训练。</p>
<ol>
<li>我们先把所有学生按照年龄从高到低进行排序：</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 按student_age从高到低</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tt_students <span class="keyword">ORDER</span> <span class="keyword">BY</span> student_age <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>把结果集分页，每页4条记录。要获取第1页的记录，可以使用<code>LIMIT 4 OFFSET 0</code>：</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查询第1页</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> tt_students </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> student_age <span class="keyword">DESC</span> </span><br><span class="line">LIMIT <span class="number">4</span> <span class="keyword">OFFSET</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">-- 或者使用下面语句</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> t_students </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> student_age <span class="keyword">DESC</span> </span><br><span class="line">LIMIT <span class="number">4</span> ;</span><br></pre></td></tr></table></figure>

<p>上述查询<code>LIMIT 4 OFFSET 0</code>表示，对结果集从0号记录开始，最多取4条。注意SQL记录集的索引从0开始。</p>
<ol start="3">
<li>如果要查询第2页，那么我们只需要“跳过”头4条记录，也就是对结果集从索引为4号的记录开始查询，把<code>OFFSET</code>设定为4。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查询第2页</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> t_students </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> student_age <span class="keyword">DESC</span> </span><br><span class="line">LIMIT <span class="number">4</span> <span class="keyword">OFFSET</span> <span class="number">4</span>;</span><br><span class="line"><span class="comment">-- 或者使用下面语句</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> t_students </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> student_age <span class="keyword">DESC</span> </span><br><span class="line">LIMIT <span class="number">4</span> <span class="number">4</span>;</span><br></pre></td></tr></table></figure>

<p>由于表<code>tt_students</code>只有6条数据，因此第2页只有2条记录，因此最终的结果集按实际数量2显示，&#96;LIMIT 4表示的意思是“最多4条记录”。</p>
<p>如果后续还存在别的页，那么查询第3页的时候，<code>OFFSET</code>应该设定为8；</p>
<p>查询第4页的时候，<code>OFFSET</code>应该设定为12。</p>
<p>可见，分页查询的关键在于，首先要确定每页需要显示的结果数量<code>pageSize</code>（这里是4），然后根据当前页的索引<code>pageIndex</code>（从1开始），确定<code>LIMIT</code>和<code>OFFSET</code>应该设定的值：</p>
<ul>
<li><code>LIMIT = pageSize</code>；</li>
<li><code>OFFSET = pageSize * (pageIndex - 1)</code>。</li>
</ul>
<p>这样就能正确查询出第N页的记录集。</p>
<p>原本表<code>tt_student</code>一共就6条记录，但我们把<code>OFFSET</code>设置为20，会得到什么结果呢？</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- OFFSET设定为20</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> t_students </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> student_age <span class="keyword">DESC</span> </span><br><span class="line">LIMIT <span class="number">4</span> <span class="keyword">OFFSET</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<p><code>OFFSET</code>超过了查询的最大数量并不会报错，而是得到一个空的结果集。</p>
<h4><span id="注意">注意</span></h4><p><code>OFFSET</code>是可选的，如果只写<code>LIMIT 15</code>，那么相当于<code>LIMIT 15 OFFSET 0</code>。</p>
<p>在MySQL中，<code>LIMIT 15 OFFSET 30</code>还可以简写成<code>LIMIT 30, 15</code>。</p>
<p>使用<code>LIMIT &lt;M&gt; OFFSET &lt;N&gt;</code>分页时，随着<code>N</code>越来越大，查询效率也会越来越低。</p>
<h4><span id="小结">小结</span></h4><p>使用<code>LIMIT &lt;M&gt; OFFSET &lt;N&gt;</code>可以对结果集进行分页，每次查询返回结果集的一部分；</p>
<p>分页查询需要先确定每页的数量和当前页数，然后确定<code>LIMIT</code>和<code>OFFSET</code>的值。</p>
<h4><span id="思考">思考</span></h4><p>在分页查询之前，如何计算一共有几页（<code>totalPage</code>）？</p>
<p>这部分可以通过后面学习聚合查询时获取总的数据量（<code>totalSize</code>）,然后可以整除的情况下<code>totalPage = totalSize/pageSize</code>，不能整除还有余数的情况下，<code>totalPage = totalSize/pageSize+1</code>，这里是否整除可以判断<code>totalSize%pageSize==0</code>是否为<code>true</code>来确定。</p>
<h2><span id="基本查询sql的执行顺序极重要">基本查询SQL的执行顺序（极重要）</span></h2><ol>
<li>执行<code>FROM </code></li>
<li><code>WHERE</code>条件过滤 </li>
<li><code>SELECT</code>投影 </li>
<li><code>ORDER BY</code>排序</li>
</ol>
<p>还有聚合查询和多表查询，我们在第三节学习。</p>
<h1><span id="聚合函数-分组-子查询及组合查询三">聚合函数、分组、子查询及组合查询（三）</span></h1><h2><span id="聚合函数">聚合函数：</span></h2><p><code>SQL</code>中提供的聚合函数可以用来统计、求和、求最值等等。</p>
<p>分类：</p>
<ul>
<li><p><code>COUNT</code>：统计行数量</p>
</li>
<li><p><code>SUM</code>：获取单个列的合计值</p>
</li>
<li><p><code>AVG</code>：计算某个列的平均值</p>
</li>
<li><p><code>MAX</code>：计算列的最大值</p>
</li>
<li><p><code>MIN</code>：计算列的最小值</p>
</li>
</ul>
<p>首先，创建数据表如下：</p>
<p><img src="https://pic.downk.cc/item/5e858f04504f4bcb04d5769e.jpg"></p>
<h3><span id="执行列-行计数count">执行列、行计数（count）</span></h3><p>标准格式</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="operator">&lt;</span> 计数规范 <span class="operator">&gt;</span>)</span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span> 表名 <span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p>其中，计数规范包括：</p>
<ul>
<li><p><code>*</code>:计数所有选择的行，包括NULL值；</p>
</li>
<li><p><code>ALL </code>列名：计数指定列的所有非空值行，如果不写，默认为<code>ALL</code>；</p>
</li>
<li><p><code>DISTINCT</code> 列名：计数指定列的唯一非空值行。</p>
</li>
</ul>
<p><strong>例，计算班里共有多少学生：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span> t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858f75504f4bcb04d5bfd2.jpg"></p>
<p><strong>也可加入筛选条件，如求女学生数目：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  student_sex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858fba504f4bcb04d5f5c2.jpg"></p>
<p><strong>如果要计算班级数目，就需要用到<code>DISTINCT</code>：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> student_class)</span><br><span class="line"><span class="keyword">FROM</span> t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e858ffe504f4bcb04d637e9.jpg"></p>
<p><code>DISTINCT</code>即去重，如果不加<code>DISTINCT</code>则结果为表行数——5。</p>
<h3><span id="返回列合计值sum">返回列合计值（SUM）</span></h3><p><font color="red">注：<code>sum</code>只有<code>ALL</code>与<code>DISTINCT</code>两种计数规范，无<code>*</code>。</font></p>
<p><strong>计算学生年龄之和：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">SUM</span>(student_age)</span><br><span class="line"><span class="keyword">FROM</span> t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8591b6504f4bcb04d765aa.jpg"></p>
<h3><span id="返回列平均值avg">返回列平均值（AVG）</span></h3><p><strong>计算学生平均年龄：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">AVG</span>(student_age)</span><br><span class="line"><span class="keyword">FROM</span> t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8591db504f4bcb04d782a2.jpg"></p>
<h3><span id="返回最大值x2f最小值maxx2fmin">返回最大值&#x2F;最小值（MAX&#x2F;MIN）</span></h3><p><strong>求年龄最大的学生信息（最小值同理）</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="built_in">MAX</span>(student_age)</span><br><span class="line"><span class="keyword">FROM</span> t_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8591f9504f4bcb04d797a4.jpg"></p>
<p><font color="red">注：这里只能求出最大年龄，要想显示年龄最大的学生全部信息，需要用到之后的子查询。</font></p>
<h2><span id="数据分组group-by">数据分组（GROUP BY)</span></h2><p><code>SQL</code>中数据可以按列名分组，搭配聚合函数十分实用。</p>
<p>例，统计每个班的人数:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  student_class,</span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="keyword">ALL</span> student_name) <span class="keyword">AS</span> 总人数</span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  (student_class);</span><br></pre></td></tr></table></figure>

<p><code>AS</code>为定义别名，别名的使用在组合及联接查询时会有很好的效果，之后再说。</p>
<p><img src="https://pic.downk.cc/item/5e85922e504f4bcb04d7bdd7.jpg"></p>
<p>分组中也可以加入筛选条件<code>WHERE</code>，不过这里一定要注意的是，执行顺序为：</p>
<ol>
<li><code>WHERE</code>过滤</li>
<li>分组</li>
<li>聚合函数。</li>
</ol>
<p><font color="red">牢记！</font></p>
<p><strong>统计每个班上20岁以上的学生人数：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  student_class,</span><br><span class="line">  <span class="built_in">COUNT</span>(student_name) <span class="keyword">AS</span> 总人数</span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  student_age <span class="operator">&gt;</span> <span class="number">20</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  (student_class);</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e859258504f4bcb04d7de5a.jpg"></p>
<h3><span id="having过滤条件">HAVING过滤条件</span></h3><p>之前说了分组操作、聚合函数、<code>WHERE</code>过滤的执行顺序，那如果我们希望在聚合之后执行过滤条件怎么办？</p>
<p>例，我们想查询平均年龄在20岁以上的班级</p>
<p>能用下面的语句吗？</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  student_class,</span><br><span class="line">  <span class="built_in">AVG</span>(student_age)</span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  <span class="built_in">AVG</span>(student_age) <span class="operator">&gt;</span> <span class="number">20</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  student_class;</span><br></pre></td></tr></table></figure>

<p>结果会出错。正因为聚合函数在<code>WHERE</code>之后执行，所以这里在<code>WHERE</code>判断条件里加入聚合函数是做不到的。</p>
<p>这里使用<code>HAIVING</code>即可完成：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  student_class,</span><br><span class="line">  <span class="built_in">AVG</span>(student_age) <span class="keyword">AS</span> 平均年龄</span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  (student_class)</span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">  <span class="built_in">AVG</span>(student_age) <span class="operator">&gt;</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e859290504f4bcb04d808b0.jpg"></p>
<p>这里再啰嗦一句</p>
<p><strong><code>SQL</code>的执行顺序：</strong></p>
<ul>
<li><p>第一步：执行<code>FROM</code></p>
</li>
<li><p>第二步：<code>WHERE</code>条件过滤</p>
</li>
<li><p>第三步：<code>GROUP BY</code>分组</p>
</li>
<li><p>第四步：执行<code>SELECT</code>投影列</p>
</li>
<li><p>第五步：<code>HAVING</code>条件过滤</p>
</li>
<li><p>第六步：执行<code>ORDER BY</code> 排序</p>
</li>
</ul>
<h2><span id="子查询">子查询：</span></h2><p>为什么要子查询？</p>
<p>现有一数据表如下：</p>
<p><img src="https://pic.downk.cc/item/5e8592b7504f4bcb04d825d3.jpg"><br>根据之前的知识我们可以查出每门科目的最高分，但是要想查出取得最高分的学生信息就做不到了。这时就需要用到子查询来取得完整的信息。</p>
<p>什么是子查询？子查询就是嵌套在主查询中的查询。</p>
<p>子查询可以嵌套在主查询中所有位置，包括<code>SELECT</code>、<code>FROM</code>、<code>WHERE</code>、<code>GROUP BY</code>、<code>HAVING</code>、<code>ORDER BY</code>。</p>
<p>但并不是每个位置嵌套子查询都是有意义并实用的，这里对几种有实际意义的子查询进行说明。</p>
<p>现有表两张：一张学生表、一张班表。<code>id</code>相关联</p>
<p><img src="https://pic.downk.cc/item/5e8592df504f4bcb04d84202.jpg"></p>
<p><img src="https://pic.downk.cc/item/5e8592eb504f4bcb04d84c01.jpg"></p>
<h3><span id="在select中嵌套">在SELECT中嵌套</span></h3><p>学生信息和班级名称位于不同的表中，要在同一张表中查出学生的学号、姓名、班级名称：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  s.student_id,</span><br><span class="line">  s.student_name,(</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      class_name</span><br><span class="line">    <span class="keyword">FROM</span> t_class c</span><br><span class="line">    <span class="keyword">WHERE</span></span><br><span class="line">      c.class_id <span class="operator">=</span> s.class_id</span><br><span class="line">  )</span><br><span class="line"><span class="keyword">FROM</span> t_student s</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  s.student_id;</span><br></pre></td></tr></table></figure>


<p>首先这条<code>SQL</code>语句用到了别名，写法为在<code>FORM</code>的表名后加上某个字符比如<code>FROM t_student s，</code>这样在之后调用<code>t_student</code>的某一列时就可以用<code>s.student_id来</code>强调此列来源于对应别名的那张表。</p>
<p>别名在子查询及联接查询中的应用有着很好效果，当两张表有相同列名或者为了加强可读性，给表加上不同的别名，就能很好的区分哪些列属于哪张表。</p>
<p>还有种情况就是在子查询或联接查询时，主查询及子查询均为对同一张表进行操作，为主、子查询中的表加上不同的别名能够很好的区分哪些列的操作是在主查询中进行的，哪些列的操作是在子查询中进行的，下文会有实例说明。</p>
<p>接下来回到上面的<code>SQL</code>语句中，可以看出本条子查询的嵌套是在<code>SELECT</code>位置（括号括起来的部分），它与学号、学生姓名以逗号分隔开并列在<code>SELECT</code>位置，也就是说它是我们想要查出的一列，</p>
<p>子查询中查出的是，班级表中的班级<code>id</code>与学生表中的班级<code>id</code>相同的行，注意 <code>WHERE c.class_id=s.class_id </code>这里就是别名用法的一个很好的体现，区分开了两张表中同样列名的列。</p>
<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e859338504f4bcb04d88208.jpg"><br>最后的<code>GROUP BY</code>可以理解为对重复行的去重，如果不加：</p>
<p><img src="https://pic.downk.cc/item/5e859345504f4bcb04d88abb.jpg"></p>
<h3><span id="在where中嵌套">在WHERE中嵌套</span></h3><p>现要查出C语言成绩最高的学生的信息：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  student_subject <span class="operator">=</span> <span class="string">&#x27;C语言&#x27;</span></span><br><span class="line">  <span class="keyword">AND</span> student_score <span class="operator">&gt;=</span> <span class="keyword">ALL</span> (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      student_score</span><br><span class="line">    <span class="keyword">FROM</span> t_student</span><br><span class="line">    <span class="keyword">WHERE</span></span><br><span class="line">      student_subject <span class="operator">=</span> <span class="string">&#x27;C语言&#x27;</span></span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e85936a504f4bcb04d8a527.jpg"><br>这里出现了一个<code>ALL</code>，其为子查询运算符</p>
<p>分类：</p>
<ul>
<li><p><code>ALL</code>运算符<br>和子查询的结果逐一比较，必须全部满足时表达式的值才为真。</p>
</li>
<li><p><code>ANY</code>运算符<br>和子查询的结果逐一比较，其中一条记录满足条件则表达式的值就为真。</p>
</li>
<li><p><code>EXISTS/NOT EXISTS</code>运算符<br><code>EXISTS</code>判断子查询是否存在数据，如果存在则表达式为真，反之为假。<code>NOT EXISTS</code>相反。</p>
</li>
</ul>
<p>在子查询或相关查询中，要求出某个列的最大值，通常都是用<code>ALL</code>来比较，大意为比其他行都要大的值即为最大值。</p>
<p>要查出C语言成绩比李四高的学生的信息：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  student_subject <span class="operator">=</span> <span class="string">&#x27;C语言&#x27;</span></span><br><span class="line">  <span class="keyword">AND</span> student_score <span class="operator">&gt;</span>(</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      student_score</span><br><span class="line">    <span class="keyword">FROM</span> t_student</span><br><span class="line">    <span class="keyword">WHERE</span></span><br><span class="line">      student_name <span class="operator">=</span> <span class="string">&#x27;李四&#x27;</span></span><br><span class="line">      <span class="keyword">AND</span> student_subject <span class="operator">=</span> <span class="string">&#x27;C语言&#x27;</span></span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8593dd504f4bcb04d8f4ac.jpg"></p>
<p>通过上面两例，应该可以明白子查询在<code>WHERE</code>中嵌套的作用。通过子查询中返回的列值来作为比较对象，在<code>WHERE</code>中运用不同的比较运算符来对其进行比较，从而得到结果。</p>
<p>现在我们回到最开始的问题，怎么查出每门课最高成绩的学生的信息：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student s1</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  s1.student_score <span class="operator">&gt;=</span> <span class="keyword">ALL</span>(</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      s2.student_score</span><br><span class="line">    <span class="keyword">FROM</span> t_student s2</span><br><span class="line">    <span class="keyword">WHERE</span></span><br><span class="line">      s1.student_subject <span class="operator">=</span> s2.student_subject</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<p>这里就是上文提到的别名的第二种用法，主、子查询对同一张表操作，区分开位于内外表中相同的列名。</p>
<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e8593f4504f4bcb04d90360.jpg"></p>
<h3><span id="子查询的分类">子查询的分类</span></h3><ul>
<li><p>相关子查询</p>
<ul>
<li>执行依赖于外部查询的数据。</li>
<li>外部查询返回一行，子查询就执行一次。</li>
</ul>
</li>
<li><p>非相关子查询</p>
<ul>
<li>独立于外部查询的子查询。</li>
<li>子查询总共执行一次，执行完毕后后将值传递给外部查询。</li>
</ul>
</li>
</ul>
<p>上文提到的例子中，第一个例子求学生对应班级名的即为相关子查询，其中<code>WHERE c.class_id=s.class_id </code>即为相关条件。其他的例子均只对一张表进行操作，为非相关子查询。</p>
<p>需要注意的是相关子查询主查询执行一回，子查询就执行一回，十分耗费时间，尤其是当数据多的时候。</p>
<h2><span id="组合查询">组合查询</span></h2><p>通过<code>UNION</code>运算符来将两张表纵向联接，基本方式为：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  列<span class="number">1</span>,</span><br><span class="line">  列<span class="number">2</span></span><br><span class="line"><span class="keyword">FROM</span> 表<span class="number">1</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  列<span class="number">3</span>,</span><br><span class="line">  列<span class="number">4</span></span><br><span class="line"><span class="keyword">FROM</span> 表<span class="number">2</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>UNION ALL</code>为保留重复行：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  列<span class="number">1</span>,</span><br><span class="line">  列<span class="number">2</span></span><br><span class="line"><span class="keyword">FROM</span> 表<span class="number">1</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  列<span class="number">3</span>,</span><br><span class="line">  列<span class="number">4</span></span><br><span class="line"><span class="keyword">FROM</span> 表<span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p>组合查询并不是太实用，所以这里只是简单提一下，不举出例子了。</p>
<h2><span id="总结">总结</span></h2><p>上文说过相关子查询不推荐使用，组合查询又用的少之又少，那需要关联的多张表我们怎么做？</p>
<p>这就是下一篇博文要详细说明的<code>SQL</code>的重点表联接、联接查询。而此篇博文目的是为了对嵌套查询、别名的用法等等打下基础，毕竟只是写法变了，思路还是相似的。</p>
<h1><span id="表联接与联接查询四">表联接与联接查询（四）</span></h1><h2><span id="前言">前言</span></h2><p>既然是最后一篇那就不能只列出些干枯的标准语句，更何况表联接也是<code>SQL</code>中较难的部分，所以此次搭配题目来详细阐述表联接。</p>
<h2><span id="表联接">表联接</span></h2><p>前面说到相关子查询效率低下，那我们怎么能将不同表的信息一起查询出来呢？这就需要用到表联接。</p>
<p>和之前的<code>UNION</code>组合查询不同，<code>UNION</code>是将不同的表组合起来，也就是纵向联接，说白了就是竖着拼起来。</p>
<p>而表联接是通过笛卡尔乘积将表进行横向联接，所谓的通过笛卡尔乘积简单说就是两表的行依次相联再相加。要想更详细的理解可以百度下，毕竟本文主要是汇总<code>SQL</code>语句。</p>
<p>现在有如下两张表：</p>
<p><img src="https://pic.downk.cc/item/5e859487504f4bcb04d967d5.jpg"><br><img src="https://pic.downk.cc/item/5e859494504f4bcb04d97383.jpg"></p>
<p>这是当初老师布置的一份作业，我偷个懒就不改数据了。不过把这些真神级人物的大名贴出来做“实验”总觉得心里有很虚，更何况大部分都是IT业的。如有什么不敬我先道个歉，别跟我一般见识。</p>
<p>好了，扯远了。怎么联接这两张表呢？标准写法：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student</span><br><span class="line"><span class="keyword">JOIN</span> t_class;</span><br></pre></td></tr></table></figure>

<p>结果这里只截一小部分图，因为笛卡尔乘积后的行数等于两张表的行数乘积，实在太多了。</p>
<p><img src="https://pic.downk.cc/item/5e8594ae504f4bcb04d984a7.jpg"></p>
<p>这里就可以理解表联接的原理了，依次相连再相加。当然其中很多是无效行，为了去除无效的行我们就要用到外键来进行约束。学生表中的<code>_fk</code>与班级表中的<code>_infor</code>相关联：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student s</span><br><span class="line"><span class="keyword">JOIN</span> t_class c <span class="keyword">ON</span> s._fk <span class="operator">=</span> c._infor;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e8594c2504f4bcb04d9917b.jpg"></p>
<p>这里通过外键的匹配我们就得到了一张完美的联接之后的表，它可以看做一张新表，想要任何数据均可以从此表中查询，这就是表联接的强大之处。</p>
<h2><span id="表联接的分类">表联接的分类：</span></h2><h3><span id="内联接">内联接</span></h3><p>内联接是指两个表中某一行相关的列值匹配时，这一行才会出现在表中。就像上例中<code>s._fk</code>与<code>c._infor</code>相同时才会出行该行，其他的行剔除。</p>
<p>语法为<code>INNER JOIN</code> 其中<code>INNER</code>可以省略。</p>
<p>内联接的简写：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student s,</span><br><span class="line">  t_class c</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  c._infor <span class="operator">=</span> s._fk</span><br></pre></td></tr></table></figure>

<p>此写法也是我们用的最多的。</p>
<h3><span id="外联接">外联接</span></h3><p><strong>分类：</strong></p>
<ul>
<li>左外联接</li>
<li>右处联接。</li>
</ul>
<p>外联接是指不管有没有匹配，被定义了外联接的表数据都要出现在结果中。比如左外联接，那么在<code>JOIN</code>左边的表就被定义为外联接，那么此表中所有数据都会出现在查询结果中。</p>
<p>注意班级表中的四班是没有学生的，所以在内联接之后理所当然的被剔除了。现在以外联接做示例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> t_student s</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> t_class c <span class="keyword">ON</span> s._fk <span class="operator">=</span> c._infor;</span><br></pre></td></tr></table></figure>

<p>上面<code>SQL</code>中表<code>t_class</code>在写在<code>JOIN</code>的右边，所以我们用<code>RIGHT JOIN</code>来进行外联接。</p>
<p><img src="https://pic.downk.cc/item/5e85951e504f4bcb04d9d2c9.jpg"></p>
<p>最下面多了一行四班的信息</p>
<p>例如我们想查出还没有学生录入的班级信息：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  c._id,</span><br><span class="line">  c._cname,</span><br><span class="line">  c._code</span><br><span class="line"><span class="keyword">FROM</span> t_student s</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> t_class c <span class="keyword">ON</span> s._fk <span class="operator">=</span> c._infor</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  s._id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e859544504f4bcb04d9f03f.jpg"><br>这就是外联接的用法，通常用在我们想要的数据匹配不上时。</p>
<h3><span id="自联接">自联接</span></h3><p>自联接属于内联接或外联接的一种特例，自联接所联接的表均是来自同一张，用法个人感觉还是比较巧妙的。</p>
<p>现有一表如下：</p>
<p><img src="https://pic.downk.cc/item/5e859558504f4bcb04d9fd75.jpg"></p>
<p>表中，6个人均属于某公司的员工。区别是李四为张三和王五的领导，张八为赵六和孙七的领导。<code>leader_id</code>与<code>work_id</code>相关联。</p>
<p>现在可以通过自联接巧妙的将一张表分为员工部分和领导部分：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  w.work_name,</span><br><span class="line">  l.work_name <span class="keyword">as</span> <span class="string">&#x27;领导姓名&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> t_emp w,</span><br><span class="line">  t_emp l</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  w.leader_id <span class="operator">=</span> l.work_id;</span><br></pre></td></tr></table></figure>

<p>注意别名的用法</p>
<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e85957b504f4bcb04da132b.jpg"></p>
<p>是不是有点方便？</p>
<h2><span id="知识点罗列到这里做题时间到">知识点罗列到这里，做题时间到</span></h2><h3><span id="1查询凤姐所在的班级">1.查询凤姐所在的班级</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  _cname</span><br><span class="line"><span class="keyword">FROM</span> t_student s,</span><br><span class="line">  t_class c</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  c._infor <span class="operator">=</span> s._fk</span><br><span class="line">  <span class="keyword">AND</span> s._name <span class="operator">=</span> <span class="string">&#x27;凤姐&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.downk.cc/item/5e8595a1504f4bcb04da2d18.jpg"></p>
<h3><span id="2查询同朱军同班级的学生">2.查询同朱军同班级的学生</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  s._name</span><br><span class="line"><span class="keyword">FROM</span> t_student s</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  s._fk <span class="operator">=</span> (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      cc._infor</span><br><span class="line">    <span class="keyword">FROM</span> t_class cc,</span><br><span class="line">      t_student ss</span><br><span class="line">    <span class="keyword">WHERE</span></span><br><span class="line">      ss._fk <span class="operator">=</span> cc._infor</span><br><span class="line">      <span class="keyword">AND</span> ss._name <span class="operator">=</span> <span class="string">&#x27;朱军&#x27;</span></span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">AND</span> s._name <span class="operator">!=</span> <span class="string">&#x27;朱军&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>本题中，括号内为联接后的表，其返回的是’朱军’所在班级的<code>_infor</code>，然后主查询在学生表中匹配与<code>_infor</code>相等的<code>_fk</code>的行，最后从匹配成功后的行中剔除’朱军’自己。</p>
<p><img src="https://pic.downk.cc/item/5e8595cd504f4bcb04da49e7.jpg"></p>
<h3><span id="3查询每个班级的人数">3.查询每个班级的人数</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  d._cname,</span><br><span class="line">  <span class="built_in">COUNT</span>(_name)</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      ss.<span class="operator">*</span>,</span><br><span class="line">      cc._cname</span><br><span class="line">    <span class="keyword">FROM</span> t_class cc</span><br><span class="line">    <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> t_student ss <span class="keyword">ON</span> ss._fk <span class="operator">=</span> cc._infor</span><br><span class="line">  ) d</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  d._cname;</span><br></pre></td></tr></table></figure>

<p>本题中，括号内为班级表外联接后的表，并给该联接后的表以别名<code>d</code>，按<code>d</code>的班级名称<code>d._cname</code>分组后统计各班人数。这里之所以用外联接还是因为四班没有学生但依然要统计。</p>
<p><img src="https://pic.downk.cc/item/5e8595fb504f4bcb04da677c.jpg"></p>
<h3><span id="4查询班级人数最多的班级">4.查询班级人数最多的班级</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  cc._cname,</span><br><span class="line">  <span class="built_in">COUNT</span>(_name)</span><br><span class="line"><span class="keyword">FROM</span> t_class cc,</span><br><span class="line">  t_student ss</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  cc._infor <span class="operator">=</span> ss._fk</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  cc._cname</span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">  <span class="built_in">COUNT</span>(_name) <span class="operator">&gt;=</span> <span class="keyword">ALL</span>(</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      <span class="built_in">COUNT</span>(_name)</span><br><span class="line">    <span class="keyword">FROM</span> t_class c,</span><br><span class="line">      t_student s</span><br><span class="line">    <span class="keyword">WHERE</span></span><br><span class="line">      c._infor <span class="operator">=</span> s._fk</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">      c._cname</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>这个有点凶残，用了两次表联接。括号内返回的是每个班的人数：</p>
<p><img src="https://pic.downk.cc/item/5e859619504f4bcb04da7a8a.jpg"><br>之后外部又使用了一次表联接，将每个班的人数与括号内的返回值逐一比较，得到最大值，然后找到最大值所在的班级。这里就体现了对<code>SQL</code>执行顺序的理解有多重要了，联接、分组、过滤等等的先后顺序。</p>
<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e85962a504f4bcb04da87a3.jpg"></p>
<h3><span id="5查询每个班中年龄最低的人">5.查询每个班中年龄最低的人</span></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  cc._cname,</span><br><span class="line">  ss._name,</span><br><span class="line">  ss._age</span><br><span class="line"><span class="keyword">FROM</span> t_student ss,</span><br><span class="line">  t_class cc</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  ss._fk <span class="operator">=</span> cc._infor</span><br><span class="line">  <span class="keyword">AND</span> ss._age <span class="operator">&lt;=</span> <span class="keyword">ALL</span>(</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      <span class="built_in">MIN</span>(s._age)</span><br><span class="line">    <span class="keyword">FROM</span> t_student s</span><br><span class="line">    <span class="keyword">WHERE</span></span><br><span class="line">      ss._fk <span class="operator">=</span> s._fk</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>本题中，括号内部返回一个学生表中的最小年龄，外部进行表联接后将年龄列对返回值进行比较，若小于等于返回的最小值那其本身也为最小值。</p>
<p>如果括号内部不加判断条件<code>WHERE ss._fk = s._fk</code>，则最后只会查询出一条年龄最小的数据，而并没有按我们想要的查询出每个班的最小值。</p>
<p>如：</p>
<p><img src="https://pic.downk.cc/item/5e859647504f4bcb04da99c0.jpg"><br>有人会问了既然按班分，用分组不就好了？但要注意的是最小年龄的人不只一个，而分组后每一个班只会显示一个人。所以这里用了关联条件<code>WHERE ss._fk = s._fk</code>来让内外表关联，从而统计出所有我们想要的值。</p>
<p>结果：</p>
<p><img src="https://pic.downk.cc/item/5e859654504f4bcb04daa1c5.jpg"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">专业治头秃</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://hekun97@github.io/2020/10/14/sql-yu-ju-hui-zong/">http://hekun97@github.io/2020/10/14/sql-yu-ju-hui-zong/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://hekun97@github.io" target="_blank">专业治头秃的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a><a class="post-meta__tags" href="/tags/SQL/">SQL</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.pixabay.com/photo/2017/06/12/04/21/database-2394312_960_720.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.png" target="_blank"><img class="post-qr-code-img" src="/img/wechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.png" target="_blank"><img class="post-qr-code-img" src="/img/alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/10/14/git-note/"><img class="prev-cover" src="https://cdn.pixabay.com/photo/2020/10/01/22/31/moss-5619857_960_720.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Git笔记</div></div></a></div><div class="next-post pull-right"><a href="/2020/02/19/cheng-xu-she-ji-ji-ben-fang-fa/"><img class="next-cover" src="https://cdn.pixabay.com/photo/2021/06/29/18/55/mountain-slope-6374980_960_720.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">程序设计基本方法</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">专业治头秃</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">10</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/hekun97"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/hekun97" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:hek97@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">数据库与表的操作以及创建约束（一）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.2.</span> <span class="toc-text">语法特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.3.</span> <span class="toc-text">对数据库的操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.3.1.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.3.2.</span> <span class="toc-text">查看数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.3.3.</span> <span class="toc-text">连接数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.3.4.</span> <span class="toc-text">查看当前连接数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.3.5.</span> <span class="toc-text">删除数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.4.</span> <span class="toc-text">MySQL数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.4.1.</span> <span class="toc-text">整数数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.4.2.</span> <span class="toc-text">浮点数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.4.3.</span> <span class="toc-text">高精度小数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.4.4.</span> <span class="toc-text">字符串数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.4.5.</span> <span class="toc-text">布尔类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.4.6.</span> <span class="toc-text">日期数据类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.5.</span> <span class="toc-text">对表的操作(DDL)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.5.1.</span> <span class="toc-text">创建表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.5.2.</span> <span class="toc-text">查看表的数量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.5.3.</span> <span class="toc-text">查看表的结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.5.4.</span> <span class="toc-text">删除表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.5.5.</span> <span class="toc-text">复制表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">1.5.5.1.</span> <span class="toc-text">同时复制表的结构和内容</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.5.6.</span> <span class="toc-text">只复制表结构而不复制表内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.5.7.</span> <span class="toc-text">修改表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">1.5.7.1.</span> <span class="toc-text">添加新列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">1.5.7.2.</span> <span class="toc-text">更改列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">1.5.7.3.</span> <span class="toc-text">删除列</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.6.</span> <span class="toc-text">数据库完整性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.6.1.</span> <span class="toc-text">实体完整性–主键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.6.2.</span> <span class="toc-text">实体完整性–唯一约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.6.3.</span> <span class="toc-text">域完整性–非空约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.6.4.</span> <span class="toc-text">域完整性–默认约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.6.5.</span> <span class="toc-text">引用完整性–外键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">1.6.5.1.</span> <span class="toc-text">1.创建表时，同时创建约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">1.6.5.2.</span> <span class="toc-text">2.已创建表后，追加外键约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">1.6.5.3.</span> <span class="toc-text">3.删除外键约束</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">数据修改、数据查询（二）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.1.</span> <span class="toc-text">创建表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.2.</span> <span class="toc-text">数据修改(DML)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.2.1.</span> <span class="toc-text">添加新数据：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.2.2.</span> <span class="toc-text">更改数据：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.2.3.</span> <span class="toc-text">删除数据（行）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.3.</span> <span class="toc-text">查询操作(DQL)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.3.1.</span> <span class="toc-text">基本查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.3.2.</span> <span class="toc-text">条件查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.3.2.1.</span> <span class="toc-text">选择范围</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.3.3.</span> <span class="toc-text">投影查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.3.3.1.</span> <span class="toc-text">组合查询（CONCAT）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.3.3.2.</span> <span class="toc-text">排除重复（DISTINCT）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.3.3.3.</span> <span class="toc-text">定义集合（IN或NOT IN）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.3.3.4.</span> <span class="toc-text">模糊查询（LIKE）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.3.3.5.</span> <span class="toc-text">处理空值数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.3.4.</span> <span class="toc-text">排序查询（ORDER BY）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.3.5.</span> <span class="toc-text">分页查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.3.5.1.</span> <span class="toc-text">实操步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.3.5.2.</span> <span class="toc-text">注意</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.3.5.3.</span> <span class="toc-text">小结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.3.5.4.</span> <span class="toc-text">思考</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.4.</span> <span class="toc-text">基本查询SQL的执行顺序（极重要）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">聚合函数、分组、子查询及组合查询（三）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.1.</span> <span class="toc-text">聚合函数：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.1.</span> <span class="toc-text">执行列、行计数（count）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.2.</span> <span class="toc-text">返回列合计值（SUM）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.3.</span> <span class="toc-text">返回列平均值（AVG）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.4.</span> <span class="toc-text">返回最大值&#x2F;最小值（MAX&#x2F;MIN）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.2.</span> <span class="toc-text">数据分组（GROUP BY)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.2.1.</span> <span class="toc-text">HAVING过滤条件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.3.</span> <span class="toc-text">子查询：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.3.1.</span> <span class="toc-text">在SELECT中嵌套</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.3.2.</span> <span class="toc-text">在WHERE中嵌套</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.3.3.</span> <span class="toc-text">子查询的分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.4.</span> <span class="toc-text">组合查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.5.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">表联接与联接查询（四）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.2.</span> <span class="toc-text">表联接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.3.</span> <span class="toc-text">表联接的分类：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.3.1.</span> <span class="toc-text">内联接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.3.2.</span> <span class="toc-text">外联接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.3.3.</span> <span class="toc-text">自联接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.4.</span> <span class="toc-text">知识点罗列到这里，做题时间到</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.4.1.</span> <span class="toc-text">1.查询凤姐所在的班级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.4.2.</span> <span class="toc-text">2.查询同朱军同班级的学生</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.4.3.</span> <span class="toc-text">3.查询每个班级的人数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.4.4.</span> <span class="toc-text">4.查询班级人数最多的班级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.4.5.</span> <span class="toc-text">5.查询每个班中年龄最低的人</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/08/01/git-shi-yong-xiao-ji-qiao-xiu-gai-commit-zhu-shi/" title="Git使用小技巧【修改commit注释】"><img src="https://cdn.pixabay.com/photo/2022/05/18/12/04/flower-7205105_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git使用小技巧【修改commit注释】"/></a><div class="content"><a class="title" href="/2022/08/01/git-shi-yong-xiao-ji-qiao-xiu-gai-commit-zhu-shi/" title="Git使用小技巧【修改commit注释】">Git使用小技巧【修改commit注释】</a><time datetime="2022-08-01T04:43:21.000Z" title="发表于 2022-08-01 12:43:21">2022-08-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/27/mac-gua-zai-a-li-yun-pan/" title="Mac阿里云盘挂载本地"><img src="https://cdn.pixabay.com/photo/2021/02/08/16/03/dinosaur-5995333_960_720.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mac阿里云盘挂载本地"/></a><div class="content"><a class="title" href="/2021/12/27/mac-gua-zai-a-li-yun-pan/" title="Mac阿里云盘挂载本地">Mac阿里云盘挂载本地</a><time datetime="2021-12-27T06:27:32.000Z" title="发表于 2021-12-27 14:27:32">2021-12-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/11/hexoknowledge/" title="hexo的更多知识"><img src="https://cdn.pixabay.com/photo/2020/03/13/14/06/dead-sea-4927978_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="hexo的更多知识"/></a><div class="content"><a class="title" href="/2021/07/11/hexoknowledge/" title="hexo的更多知识">hexo的更多知识</a><time datetime="2021-07-11T08:38:40.000Z" title="发表于 2021-07-11 16:38:40">2021-07-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/06/22/listnode-lian-biao/" title="ListNode-链表"><img src="https://cdn.pixabay.com/photo/2021/06/13/07/33/mountain-pass-6332476_960_720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ListNode-链表"/></a><div class="content"><a class="title" href="/2021/06/22/listnode-lian-biao/" title="ListNode-链表">ListNode-链表</a><time datetime="2021-06-22T03:40:00.000Z" title="发表于 2021-06-22 11:40:00">2021-06-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/06/07/linux-xia-chuang-jian-wen-jian-bing-xie-ru-nei-rong/" title="linux下创建文件并写入内容"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="linux下创建文件并写入内容"/></a><div class="content"><a class="title" href="/2021/06/07/linux-xia-chuang-jian-wen-jian-bing-xie-ru-nei-rong/" title="linux下创建文件并写入内容">linux下创建文件并写入内容</a><time datetime="2021-06-07T09:08:32.000Z" title="发表于 2021-06-07 17:08:32">2021-06-07</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 专业治头秃</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://hekun97.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  if (typeof gtag === 'function') {
    gtag('config', '', {'page_path': window.location.pathname});
  }

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>